import{d as e,C as z,f as m,D as T,j as l,k as d,P as j,o as D,r as o,x as F,F as b,e as M,G as O,R as S,L as W,aM as I,B as u,q as C,c4 as N,l as L,cg as P,ch as B}from"./app-4f3bf436.js";import{g as E}from"./get-initials-d1c6cec7.js";import{H as w}from"./Heart-8f13a792.js";import{I as J}from"./inf-composer-78004965.js";import"./mail-f1a5ead4.js";const A=h=>{const{followers:a,engagement:r,category:i,...g}=h;return e(z,{variant:"outlined",...g,children:e(m,{divider:e(T,{}),children:l(m,{alignItems:"center",direction:"row",flexWrap:"wrap",sx:{px:2,py:1.5},children:[l(m,{alignItems:"flex-start",spacing:2,direction:{xs:"column",sm:"column",md:"column"},sx:{mr:10},children:[e(d,{color:"text.primary",noWrap:!0,sx:{fontSize:14,fontWeight:700},children:a}),e(d,{color:"text.secondary",noWrap:!0,sx:{fontSize:12},style:{marginTop:0},children:"Followers"})]}),l(m,{alignItems:"flex-start",spacing:2,direction:{xs:"column",sm:"column",md:"column"},sx:{mr:10},children:[e(d,{color:"text.primary",noWrap:!0,sx:{fontSize:14,fontWeight:700},children:r}),e(d,{color:"text.secondary",style:{marginTop:0},noWrap:!0,sx:{fontSize:12},children:"Engagement rate"})]}),l(m,{alignItems:"flex-start",spacing:2,direction:{xs:"column",sm:"column",md:"column"},sx:{mr:10},children:[e(d,{color:"text.primary",noWrap:!0,sx:{fontSize:14,fontWeight:700},children:"Categories"}),e(d,{color:"text.secondary",style:{marginTop:0},noWrap:!0,sx:{fontSize:12},children:i})]})]})})})},R=()=>{const h={isFullScreen:!1,isOpen:!1,message:"",subject:"",to:"",toDisplay:"",loading:!1,data:new FormData},a=F(),[r,i]=o.useState(h),g=o.useCallback(()=>{i(t=>({...t,isOpen:!0}))},[]),f=o.useCallback(()=>{i(h)},[]),n=o.useCallback(()=>{i(t=>({...t,isFullScreen:!0}))},[]),y=o.useCallback(()=>{i(t=>({...t,isFullScreen:!1}))},[]),v=o.useCallback(t=>{i(c=>({...c,data:t}))},[]),k=o.useCallback(t=>{i(c=>({...c,message:t}))},[]),_=o.useCallback(t=>{i(c=>({...c,subject:t}))},[]),p=o.useCallback(t=>{i(c=>({...c,to:t}))},[]),x=o.useCallback(t=>{i(c=>({...c,toDisplay:t}))},[]);return{...r,handleClose:f,handleMaximize:n,handleMessageChange:k,handleMinimize:y,handleSubmit:()=>{i(t=>({...t,loading:!0})),r.data.append("to",r.to),r.data.append("subject",r.subject),r.data.append("message",r.message),r.data.append("email",JSON.parse(localStorage.getItem("email"))),axios.post("/api/send_mail",r.data,{}).then(t=>{i(c=>({...c,loading:!1,subject:"",to:"",message:"",isOpen:!1,data:new FormData})),B.success("Message Sent Successfuly."),a(thunks.getEmails({label:useSearchParams().get("label")||"inbox",email:JSON.parse(localStorage.getItem("email"))}))}).catch(t=>{})},handleOpen:g,handleAttach:v,handleSubjectChange:_,handleToChange:p,handleDisplayChange:x}},q=h=>{const{influencer:a,currentTab:r,...i}=h;D();const[g,f]=o.useState(a.liked==1),n=R(),y=F();o.useEffect(()=>{f(a.liked==1)},[a]);const v=()=>{f(!0);let s={email:JSON.parse(localStorage.getItem("email")),tab:r,inf_id:a.id,liked:"1"};axios.post("/api/handle_like",s).then(t=>{t.data.status})},k=()=>{f(!1);let s={email:JSON.parse(localStorage.getItem("email")),tab:r,inf_id:a.id,liked:"0"};axios.post("/api/handle_like",s).then(t=>{t.data.status===200&&y(P({email:JSON.parse(localStorage.getItem("email"))}))})},_=s=>Number(s)<=1?Number(s).toFixed(2)+"%":x(Number(s).toFixed(1)).replace(".0","")+"%",p=[{divider:1e18,suffix:"E"},{divider:1e15,suffix:"P"},{divider:1e12,suffix:"T"},{divider:1e9,suffix:"G"},{divider:1e6,suffix:"M"},{divider:1e3,suffix:"K"}],x=s=>{for(var t=0;t<p.length;t++)if(s>=p[t].divider)return Number(s/p[t].divider).toFixed(1).toString().replace(".0","")+p[t].suffix;return s.toString()};return l(b,{children:[e(z,{...i,style:{marginTop:30,marginBottom:30},children:l(M,{children:[l(m,{alignItems:"center",direction:"row",flexWrap:"wrap",justifyContent:"space-between",sx:{px:2,py:1.5},children:[l(m,{alignItems:"flex-start",spacing:2,direction:{xs:"column",sm:"row"},children:[e(O,{component:S,href:"/profile/inf/"+a.username,target:"_blank",src:a.profile_pic_url_hd?a.profile_pic_url_hd:`https://ui-avatars.com/api/?name=${a.full_name?a.full_name:""}&background=2970FF&color=fff&rounded=true`,sx:{width:74,height:74},children:E(a.full_name)}),l("div",{children:[e(W,{color:"#2970FF",component:S,href:"/profile/inf/"+a.username,target:"_blank",variant:"h6",style:{fontSize:18},children:a.username}),a.verified&&a.verified==1||a.verified&&a.verified==1?e("div",{className:"verified-image"}):"",e(d,{sx:{color:"text.primary"},style:{fontSize:14},children:a.full_name}),e(d,{color:"text.secondary",className:"font-inter location-pointer",variant:"overline",style:{fontSize:12,marginTop:17}}),e(d,{color:"primary",variant:"overline",style:{fontSize:10},children:a.city+", "+a.Country})]}),e("div",{className:"custom-reach",children:l(I,{container:!0,children:[l(I,{item:!0,sx:{color:"#2970FF",fontSize:"11px",fontWeight:300,pl:1,pr:1,pt:.5,pb:.5},children:[e("div",{children:"Reach"}),e("div",{style:{fontSize:"16px",fontWeight:700},children:x(a.follower_count?a.follower_count:a.subscribers)})]}),e(I,{item:!0,style:{display:"flex",alignItems:"center",margin:"0 auto"},children:e("div",{className:"reach-arrow"})})]})})]}),e(m,{alignItems:"center",direction:"row",className:"right-panel",spacing:2,children:g?l(b,{children:[e(u,{onClick:k,className:"right-btn",startIcon:e(C,{sx:{transform:"scale(1.8)",color:"error.main","& path":{fill:s=>s.palette.error.main,fillOpacity:1}},children:e(w,{})})}),e(u,{component:S,href:"/profile/inf/"+a.username,sx:{color:"text.primary"},size:"small",target:"_blank",className:"right-btn",startIcon:e(b,{children:e("img",{src:"/assets/icons/icon-profile.svg"})}),variant:"outlined",children:"View Profile"}),e(u,{onClick:()=>{n.handleToChange(a.public_email),n.handleDisplayChange(a.full_name),n.handleOpen()},size:"small",className:"right-btn",startIcon:e(C,{children:e(N,{})}),variant:"contained",children:"Send Message"})]}):l(b,{children:[e(u,{onClick:v,className:"right-btn",startIcon:e(C,{sx:{transform:"scale(1.8)"},children:e(w,{})})}),e(u,{component:S,href:"/profile/inf/"+a.username,size:"small",target:"_blank",className:"right-btn",startIcon:e(b,{children:e("img",{src:"/assets/icons/icon-profile.svg"})}),variant:"outlined",children:"View Profile"}),e(u,{onClick:()=>{n.handleToChange(a.public_email),n.handleDisplayChange(a.public_email),n.handleOpen()},size:"small",className:"right-btn",startIcon:e(C,{children:e(N,{})}),variant:"contained",children:"Send Message"})]})})]}),e(L,{sx:{mt:2},children:e(A,{engagement:_(a.engagement_rate),followers:x(a.follower_count?a.follower_count:a.subscribers),category:a.category_niche})})]})}),e(J,{maximize:n.isFullScreen,message:n.message,onClose:n.handleClose,onMessageChange:n.handleMessageChange,onMinimize:n.handleMinimize,onSubjectChange:n.handleSubjectChange,onSubmit:n.handleSubmit,onAttach:n.handleAttach,onToChange:n.handleToChange,onDisplayChange:n.handleDisplayChange,open:n.isOpen,subject:n.subject,loading:n.loading,to:n.to,toDisplay:n.toDisplay,avatar:a.profile_pic_url_hd})]})};q.propTypes={influencer:j.object.isRequired};export{q as I};
