import{w as A,x as q,r as n,j as o,bM as te,f as g,d as t,k as C,aw as ae,q as O,c2 as ne,bO as se,l as v,C as E,D as R,cu as ie,F as I,B as b,ch as $,aS as oe,c9 as L,o as re,cO as le,c as ce,S as ue,aL as de,br as me,G as pe,n as he,c4 as B,bk as fe,bl as ge,u as G}from"./app-44019970.js";import{H as J}from"./Heart-39b34587.js";import{s as M}from"./social-post-card-2d4dcc65.js";import{I as be}from"./inf-overview-20fd48ad.js";/* empty css                */import{I as ke}from"./inf-composer-5f404e26.js";import{J as we}from"./job-list-card-ca3a498a.js";import"./mail-4c46526d.js";import{G as y}from"./Grid-8a852861.js";import"./index-52bd8be4.js";import"./Clock-da340dda.js";import"./Share07-e4de5420.js";import"./index-a87b2e38.js";import"./index-fc01274f.js";import"./index-f2508163.js";import"./FaceSmile-3b24aa76.js";import"./Link01-b974300f.js";import"./Attachment01-bc7d2e40.js";import"./Plus-18f89190.js";import"./Image01-9671680f.js";import"./use-mocked-user-2f7e8148.js";import"./get-initials-d1c6cec7.js";import"./CardHeader-56c8ede4.js";import"./CardMedia-abfa021b.js";import"./overview-tips-00eb96c8.js";import"./severity-pill-76865f59.js";import"./chart-d6009234.js";import"./CardActions-adae9013.js";import"./index-7e144e2f.js";import"./index-780be531.js";import"./index-7d7bc7d5.js";import"./overview-pending-issues-4589fb23.js";import"./quill-editor-320e3612.js";import"./isEqual-bbe96de1.js";import"./index-4ec745b6.js";import"./file-dropzone-3effe74b.js";import"./tslib.es6-af7906ce.js";import"./Upload01-d877f1c3.js";import"./bytes-to-size-706bbf81.js";const ve=s=>{var x;const{onClose:l,currentTab:c="",infID:e=0,groupID:p=0,open:h=!1,...k}=s;q();const T=JSON.parse(localStorage.getItem("email")),[f,S]=n.useState([]);console.log(f),n.useEffect(()=>{axios.post("/api/getoutreachs",{email:T}).then(d=>{S(d.data)}).catch(d=>{})},[]);const D=d=>{axios.post("/api/add_group",{group_id:d,inf_id:e,tab:c}).then(w=>{$.success("Successfuly added to outreach group."),l()}).catch(w=>{})};return o(te,{fullWidth:!0,maxWidth:"md",open:h,onClose:l,children:[o(g,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:3,sx:{px:3,py:2},children:[t(C,{variant:"h6",children:"Select a group"}),t(ae,{color:"inherit",onClick:l,children:t(O,{children:t(ne,{})})})]}),t(se,{children:o(v,{sx:{mt:2},children:[((f==null?void 0:f.length)==0||((x=f[0])==null?void 0:x.length)==0)&&t(E,{sx:{mb:3},children:t(g,{divider:t(R,{}),children:t(g,{alignItems:"flex-start",direction:"row",flexWrap:"wrap",justifyContent:"space-between",sx:{px:2,py:1.5},children:t(g,{alignItems:"center",direction:"row",spacing:2,children:o(v,{component:"span",sx:{flexGrow:1,fontFamily:d=>d.typography.fontFamily,fontSize:14,fontWeight:600,ml:1},children:["There are no outreach groups. Please click this link if you want to create a new group.",t(ie,{style:{marginLeft:9},to:"/inf-finder/new-group",underline:"always",children:"Create Outreach Group"})]})})})})}),f==null?void 0:f.map((d,w)=>w==0?t(I,{}):t(E,{sx:{mb:1},children:o(g,{children:[o(g,{alignItems:"flex-start",direction:"row",flexWrap:"wrap",justifyContent:"space-between",sx:{px:2,pt:2},children:[o(C,{variant:"subtitle1",sx:{fontSize:16},children:["Group Name: ",d[0].group_name]}),t(g,{alignItems:"center",direction:"row",spacing:2,children:t(b,{onClick:()=>D(d[0].group_id?d[0].group_id:d[0].id),variant:"contained",size:"small",style:{fontSize:14},children:"Add to this outreach group"})})]}),o(C,{variant:"inherit",sx:{fontSize:14,px:2,pb:2,pt:0},children:["Brief Description: ",d[0].brief_group]})]})}))]})})]})},Ce=s=>({userinfo:s.profile.userinfo}),Se=A(Ce)(ve),xe=()=>{const s={isFullScreen:!1,isOpen:!1,message:"",subject:"",to:"",toDisplay:"",loading:!1,data:new FormData},l=q(),[c,e]=n.useState(s),p=n.useCallback(()=>{e(i=>({...i,isOpen:!0}))},[]),h=n.useCallback(i=>{e(m=>({...m,toDisplay:i}))},[]),k=n.useCallback(()=>{e(s)},[]),T=n.useCallback(()=>{e(i=>({...i,isFullScreen:!0}))},[]),f=n.useCallback(()=>{e(i=>({...i,isFullScreen:!1}))},[]),S=n.useCallback(i=>{e(m=>({...m,data:i}))},[]),D=n.useCallback(i=>{e(m=>({...m,message:i}))},[]),x=n.useCallback(i=>{e(m=>({...m,subject:i}))},[]),d=n.useCallback(i=>{e(m=>({...m,to:i}))},[]);return{...c,handleClose:k,handleMaximize:T,handleMessageChange:D,handleMinimize:f,handleSubmit:()=>{e(i=>({...i,loading:!0})),c.data.append("to",c.to),c.data.append("subject",c.subject),c.data.append("message",c.message),c.data.append("email",JSON.parse(localStorage.getItem("email"))),axios.post("/api/send_mail",c.data,{}).then(i=>{e(m=>({...m,loading:!1,subject:"",to:"",message:"",isOpen:!1,data:new FormData})),$.success("Message Sent Successfuly."),l(thunks.getEmails({label:useSearchParams().get("label")||"inbox",email:JSON.parse(localStorage.getItem("email"))}))}).catch(i=>{})},handleOpen:p,handleAttach:S,handleSubjectChange:x,handleToChange:d,handleDisplayChange:h}},_e=[{label:"Overview",value:"infoverview"}],P=[{divider:1e18,suffix:"E"},{divider:1e15,suffix:"P"},{divider:1e12,suffix:"T"},{divider:1e9,suffix:"G"},{divider:1e6,suffix:"M"},{divider:1e3,suffix:"K"}],N=s=>{for(var l=0;l<P.length;l++)if(s>=P[l].divider)return Number(s/P[l].divider).toFixed(1).toString().replace(".0","")+P[l].suffix;return s.toString()},ye=()=>{const s=G(),[l,c]=n.useState(null),e=n.useCallback(async()=>{try{const p=await M.getProfile();s()&&c(p)}catch(p){console.error(p)}},[s]);return n.useEffect(()=>{e()},[]),l},Ne=()=>{const s=G(),[l,c]=n.useState([]),e=n.useCallback(async()=>{try{const p=await M.getPosts();s()&&c(p)}catch(p){console.error(p)}},[s]);return n.useEffect(()=>{e()},[]),l},Ie=(s="")=>{const[l,c]=n.useState([]),e=G(),p=n.useCallback(async()=>{const h=await M.getConnections();e()&&c(h)},[e]);return n.useEffect(()=>{p()},[s]),l.filter(h=>{var k;return(k=h.name)==null?void 0:k.toLowerCase().includes(s)})},Te=s=>{const l=oe(),c=JSON.parse(localStorage.getItem("email")),{socialinfo:e,userinfo:p}=s,h=ye(),[k,T]=n.useState("infoverview"),[f,S]=n.useState("not_connected"),D=Ne(),[x,d]=n.useState("");Ie(x);const w=L(),i=L(),m=q();re();const[_,Q]=n.useState(e.basic);let a=e[_];const r=xe(),[H,j]=n.useState(!!(a&&a.liked=="1")),U=u=>{Q(u)};n.useEffect(()=>{m(le({email:c,infname:window.location.pathname.split("/")[3],socialtype:"total"}))},[m]),n.useEffect(()=>{j(!!(a&&a.liked=="1"))},[a]);const F=()=>{w.handleOpen()},W=()=>{i.handleOpen()},K=()=>{j(!0);let u={email:JSON.parse(localStorage.getItem("email")),tab:_,inf_id:a&&a.id?a.id:"",liked:"1"};axios.post("/api/handle_like",u).then(z=>{z.data.status})},V=()=>{j(!1);let u={email:JSON.parse(localStorage.getItem("email")),tab:_,inf_id:a&&a.id?a.id:"",liked:"0"};axios.post("/api/handle_like",u).then(z=>{z.data.status})};ce(),n.useCallback(()=>{S("pending")},[]),n.useCallback(()=>{S("not_connected")},[]);const X=n.useCallback((u,z)=>{T(z)},[]);if(n.useCallback(u=>{d(u.target.value)},[]),!h)return null;const Y=()=>{let u=(e&&e.instagram?e.instagram.follower_count:0)+(e&&e.pinterest?e.pinterest.follower_count:0)+(e&&e.tiktok?e.tiktok.follower_count:0)+(e&&e.twitter?e.twitter.follower_count:0)+(e&&e.youtube?e.youtube.follower_count:0);return N(u)},Z=()=>{let u="";return u+="Instagram followers: "+(e&&e.instagram?N(e.instagram.follower_count):0)+`
Tiktok followers: `+(e&&e.tiktok?N(e.tiktok.follower_count):0)+`
Youtube followers: `+(e&&e.youtube?N(e.youtube.follower_count):0)+`
Twitter followers: `+(e&&e.twitter?N(e.twitter.follower_count):0)+`
Pinterest followers: `+(e&&e.pinterest?N(e.pinterest.follower_count):0)+`
`,u},ee=()=>_=="tiktok"&&a&&a.external_url=="-"?"":a&&a.external_url?a.external_url:"";return o(I,{children:[t(ue,{title:"Dashboard: Social Profile"}),t(we,{onClose:w.handleClose,open:w.open,currentTab:_,infID:a&&a.id}),t(Se,{onClose:i.handleClose,open:i.open,currentTab:_,infID:a&&a.id}),t(v,{component:"main",sx:{flexGrow:1,py:8},children:o(de,{maxWidth:l.stretch?!1:"xl",children:[o("div",{children:[t(v,{style:{backgroundImage:`url(${h.cover})`},sx:{backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",borderRadius:1,height:421,position:"relative","&:hover":{"& button":{visibility:"visible"}}}}),o(g,{alignItems:"center",direction:"row",className:"custom-parent",spacing:2,sx:{mt:4},children:[o(g,{alignItems:"center",direction:"row",className:"custom-avatar",spacing:2,children:[t(v,{component:me,sx:{alignItems:"center",display:"flex",borderWidth:2,borderStyle:"solid",borderColor:"divider",height:140,width:140,borderRadius:"50%"},children:t(pe,{src:a&&a.profile_pic_url_hd?a.profile_pic_url_hd:`https://ui-avatars.com/api/?name=${a&&a.full_name?a.full_name:""}&background=2970FF&color=fff&rounded=true`,sx:{height:130,width:130}})}),o("div",{className:"brand-info",children:[o(y,{container:!0,children:[o(y,{item:!0,sm:7,xs:12,children:[t(C,{color:"primary",variant:"h6",style:{fontSize:22,wordWrap:"break-word"},children:a?a.username:""}),t(C,{color:"text.secondary",className:"font-inter",variant:"subtitle2",style:{fontSize:12,fontWeight:600,marginTop:4},children:a?a.full_name:""})]}),t(y,{item:!0,sm:5,xs:12,children:t(he,{title:t("div",{style:{whiteSpace:"pre-line"},children:Z()}),children:t("div",{className:"custom-reach",children:o(y,{container:!0,children:[o(y,{item:!0,sx:{color:"#2970FF",fontSize:"11px",fontWeight:300,pl:1,pr:1,pt:.5,pb:.5},children:[t("div",{children:"Reach"}),t("div",{style:{fontSize:"16px",fontWeight:700},children:Y()})]}),t(y,{item:!0,style:{display:"flex",alignItems:"center",margin:"0 auto"},children:t("div",{className:"reach-arrow"})})]})})})})]}),t(C,{color:"text.secondary",className:"font-inter location-pointer",variant:"overline",style:{fontSize:12,marginTop:17}}),t(C,{color:"primary",variant:"overline",className:"font-inter",style:{fontSize:13},children:a?a.city+", "+a.Country:""})]})]}),t(v,{sx:{flexGrow:1}}),t(g,{alignItems:"center",direction:"row",spacing:2,className:"inf-button-bar",sx:{display:{md:"block"}},children:H?o(I,{children:[t(b,{onClick:V,className:"fav-btn=alone",startIcon:t(O,{sx:{transform:"scale(1.8)",color:"error.main","& path":{fill:u=>u.palette.error.main,fillOpacity:1}},children:t(J,{})})}),t(b,{className:"fav-btn-alone",startIcon:t("img",{src:"/assets/stats/users.png"}),onClick:W}),t(b,{onClick:F,size:"small",className:"fav-btn small-button",startIcon:t(I,{children:t("img",{src:"/assets/icons/invite.svg"})}),variant:"outlined",children:"Invite To Project"}),t(b,{onClick:()=>{r.handleToChange(a&&a.public_email?a.public_email:""),r.handleDisplayChange(a&&a.full_name?a.full_name:""),r.handleOpen()},size:"small",className:"social-btn small-button",startIcon:t(O,{children:t(B,{})}),variant:"contained",children:"Send Message"})]}):o(I,{children:[t(b,{onClick:K,className:"fav-btn-alone",startIcon:t(O,{sx:{transform:"scale(1.8)"},children:t(J,{})})}),t(b,{className:"fav-btn-alone",onClick:W,startIcon:t("img",{src:"/assets/stats/users.png"})}),t(b,{onClick:F,size:"small",className:"fav-btn small-button",startIcon:t(I,{children:t("img",{src:"/assets/icons/invite.svg"})}),variant:"outlined",children:"Invite To Project"}),t(b,{onClick:()=>{r.handleToChange(a&&a.public_email?a.public_email:""),r.handleDisplayChange(a&&a.full_name?a.full_name:""),r.handleOpen()},size:"small",className:"social-btn small-button",startIcon:t(O,{children:t(B,{})}),variant:"contained",children:"Send Message"})]})})]})]}),t("div",{className:"quick-link-bar",children:o("div",{className:"right-quick",children:[t("div",{className:"quick-font",children:"Quick links"}),o("div",{className:"quick-links",children:[t("a",{className:" homepage-icon",href:ee(),target:"_blank"}),e&&e[e.basic]?t("a",{className:"facebook-icon quick-link",href:"https://"+(e?e[e.basic].username.split("/").length>1?e[e.basic].username:"www.facebook.com/"+e[e.basic].username:""),target:"_blank"}):t("a",{className:"facebook-icon quick-link",href:"https://www.facebook.com",target:"_blank"}),e&&e[e.basic]?t("a",{className:"instagram-icon quick-link",href:"https://"+(e?e[e.basic].username.split("/").length>1?e[e.basic].username:"www.instagram.com/"+e[e.basic].username:""),target:"_blank"}):t("a",{className:"instagram-icon quick-link",href:"https://www.instagram.com",target:"_blank"}),e&&e[e.basic]?t("a",{className:"tiktok-icon quick-link",href:"https://"+(e?e[e.basic].username.split("/").length>1?e[e.basic].username:"www.tiktok.com/"+e[e.basic].username:""),target:"_blank"}):t("a",{className:"tiktok-icon quick-link",href:"https://www.tiktok.com",target:"_blank"}),e&&e[e.basic]?t("a",{className:"youtube-icon quick-link",href:"https://"+(e?e[e.basic].username.split("/").length>1?e[e.basic].username:"www.youtube.com/@"+e[e.basic].username:""),target:"_blank"}):t("a",{className:"youtube-icon quick-link",href:"https://www.youtube.com",target:"_blank"}),e&&e[e.basic]?t("a",{a:!0,className:"twitter-icon quick-link",href:"https://"+(e?e[e.basic].username.split("/").length>1?e[e.basic].username:"www.twitter.com/"+e[e.basic].username:""),target:"_blank"}):t("a",{className:"twitter-icon quick-link",href:"https://www.twitter.com",target:"_blank"}),e&&e[e.basic]?t("a",{className:"pinterest-icon quick-link",href:"https://"+(e?e[e.basic].username.split("/").length>1?e[e.basic].username:"www.pinterest.com/"+e[e.basic].username:""),target:"_blank"}):t("a",{className:"pinterest-icon quick-link",href:"https://www.pinterest",target:"_blank"})]})]})}),t(fe,{indicatorColor:"primary",onChange:X,scrollButtons:"auto",sx:{mt:5},textColor:"primary",value:k,variant:"scrollable",className:"tab-panel",children:_e.map(u=>t(ge,{className:"social-font",label:u.label,value:u.value},u.value))}),t(R,{}),t(v,{children:k==="infoverview"&&t(be,{posts:D,profile:h,total:"total",changeStat:U})})]})}),t(ke,{maximize:r.isFullScreen,message:r.message,onClose:r.handleClose,onMessageChange:r.handleMessageChange,onMinimize:r.handleMinimize,onSubjectChange:r.handleSubjectChange,onSubmit:r.handleSubmit,onAttach:r.handleAttach,onToChange:r.handleToChange,onDisplayChange:r.handleDisplayChange,open:r.isOpen,subject:r.subject,loading:r.loading,to:r.to,toDisplay:r.toDisplay,avatar:a&&a.profile_pic_url_hd?a.profile_pic_url_hd:""})]})},De=s=>({socialinfo:s.profile.socialinfo,userinfo:s.profile.userinfo}),ft=A(De)(Te);export{ft as default};
