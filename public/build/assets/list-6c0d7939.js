import{r as c,_ as U,J as x,d as e,ao as Y,bF as G,an as ee,P,j as i,f as v,k as l,au as z,q as M,b_ as ne,bl as te,bm as re,bn as oe,h as B,T as O,l as j,aZ as H,bQ as ae,av as F,m as ie,bo as V,cA as W,aN as w,C as T,e as A,E as L,b2 as se,bb as E,R as _,p as Q,aO as ce,aT as le,c as de,F as pe,S as ue,D as he,aM as ge,B as q,u as me}from"./app-3b15a07b.js";import{P as be}from"./Plus-990493b0.js";import{i as ve}from"./index-3e234bb3.js";import{u as Pe,d as fe,D as Ce,M as ye}from"./MobileDatePicker-77dbcb16.js";import{k as ke,h as we,i as xe,K as De,C as Ie}from"./PureDateInput-758f4dd9.js";import{C as Se}from"./Clock-dc58af39.js";import{R as Te}from"./Receipt-e9ed43a7.js";import{S as Me}from"./severity-pill-1bc52948.js";import{g as Re}from"./get-initials-d1c6cec7.js";import{T as Z,a as $,b as Le,c as I}from"./TableRow-05b2db29.js";import{T as Fe}from"./TablePagination-e62d131a.js";import"./deep-copy-ee95be26.js";import"./apply-pagination-03aa54c3.js";import"./Grid-ef997d2d.js";import"./createTheme-bd0f03b2.js";import"./DialogActions-cb805279.js";import"./LastPage-2234ae0a.js";const Ae=["onChange","PopperProps","PaperProps","ToolbarComponent","TransitionComponent","value","components","componentsProps"],je=c.forwardRef(function(r,n){const s=Pe(r,"MuiDesktopDatePicker"),u=ke(s)!==null,{pickerProps:t,inputProps:d,wrapperProps:m}=we(s,fe),{PopperProps:b,PaperProps:h,ToolbarComponent:C=Ce,TransitionComponent:f,components:g,componentsProps:y}=s,k=U(s,Ae),D=x({},d,k,{components:g,componentsProps:y,ref:n,validationError:u});return e(xe,x({},m,{DateInputProps:D,KeyboardDateInputComponent:De,PopperProps:b,PaperProps:h,TransitionComponent:f,components:g,componentsProps:y,children:e(Ie,x({},t,{autoFocus:!0,toolbarTitle:s.label||s.toolbarTitle,ToolbarComponent:C,DateInputProps:D,components:g,componentsProps:y},k))}))}),Ge=["desktopModeMediaQuery","DialogProps","PopperProps","TransitionComponent"],K=c.forwardRef(function(r,n){const s=Y({props:r,name:"MuiDatePicker"}),{desktopModeMediaQuery:u="@media (pointer: fine)",DialogProps:t,PopperProps:d,TransitionComponent:m}=s,b=U(s,Ge);return G(u,{defaultMatches:!0})?e(je,x({ref:n,PopperProps:d,TransitionComponent:m},b)):e(ye,x({ref:n,DialogProps:t},b))});var Be=function(r){return e("svg",x({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},r,{children:e("path",{fill:"#fff",fillOpacity:.01,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4.44c0-.504 0-.756.098-.9486a.9.9 0 0 1 .3934-.3933C3.684 3 3.936 3 4.44 3h15.12c.504 0 .7561 0 .9486.098a.9003.9003 0 0 1 .3933.3934C21 3.684 21 3.936 21 4.44v.6024c0 .242 0 .363-.0296.4754a.9013.9013 0 0 1-.1274.2792c-.0657.096-.1571.1752-.3399.3337l-5.7562 4.9887c-.1828.1584-.2742.2376-.3399.3336a.9015.9015 0 0 0-.1274.2792c-.0296.1125-.0296.2334-.0296.4753v4.705c0 .176 0 .264-.0284.3401a.4503.4503 0 0 1-.119.1758c-.0601.0546-.1418.0873-.3052.1526l-3.06 1.224c-.3308.1324-.4962.1985-.629.1709a.45.45 0 0 1-.2835-.1919c-.0749-.1131-.0749-.2912-.0749-.6475v-5.929c0-.2419 0-.3628-.0296-.4753a.9003.9003 0 0 0-.1274-.2792c-.0657-.096-.157-.1752-.3399-.3336L3.4969 6.1306c-.1828-.1584-.2742-.2376-.3399-.3336a.9001.9001 0 0 1-.1274-.2792C3 5.4053 3 5.2844 3 5.0424V4.44Z"})}))};const Oe=ee("div",{shouldForwardProp:o=>o!=="open"})(({theme:o,open:r})=>({flexGrow:1,overflow:"auto",paddingLeft:o.spacing(3),paddingRight:o.spacing(3),paddingTop:o.spacing(8),paddingBottom:o.spacing(8),zIndex:1,[o.breakpoints.up("lg")]:{marginLeft:-380},transition:o.transitions.create("margin",{easing:o.transitions.easing.sharp,duration:o.transitions.duration.leavingScreen}),...r&&{[o.breakpoints.up("lg")]:{marginLeft:0},transition:o.transitions.create("margin",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.enteringScreen})}})),Ve=["Blind Spots Inc.","Dispatcher Inc.","ACME SRL","Novelty I.S","Beauty Clinic SRL","Division Inc."],J=o=>{const{container:r,filters:n={},group:s,onClose:u,onFiltersChange:t,onGroupChange:d,open:m,...b}=o,h=c.useRef(null),C=G(a=>a.breakpoints.up("lg")),f=c.useCallback(a=>{var p;a.preventDefault(),t==null||t({...n,query:((p=h.current)==null?void 0:p.value)||""})},[n,t]),g=c.useCallback(a=>{const p={...n,startDate:a||void 0};p.endDate&&a&&a>p.endDate&&(p.endDate=a),t==null||t(p)},[n,t]),y=c.useCallback(a=>{const p={...n,endDate:a||void 0};p.startDate&&a&&a<p.startDate&&(p.startDate=a),t==null||t(p)},[n,t]),k=c.useCallback(a=>{let p;a.target.checked?p=[...n.customers||[],a.target.value]:p=(n.customers||[]).filter(R=>R!==a.target.value),t==null||t({...n,customers:p})},[n,t]),D=c.useCallback(a=>{t==null||t({...n,status:a.target.checked?"paid":void 0})},[n,t]),S=i("div",{children:[i(v,{alignItems:"center",justifyContent:"space-between",direction:"row",sx:{p:3},children:[e(l,{variant:"h5",children:"Filters"}),e(z,{onClick:u,children:e(M,{children:e(ne,{})})})]}),i(v,{spacing:3,sx:{p:3},children:[e("form",{onSubmit:f,children:e(te,{defaultValue:"",fullWidth:!0,inputProps:{ref:h},placeholder:"Invoice number",startAdornment:e(re,{position:"start",children:e(M,{children:e(oe,{})})})})}),i("div",{children:[e(B,{sx:{display:"block",mb:2},children:"Issue date"}),i(v,{spacing:2,children:[e(K,{inputFormat:"dd/MM/yyyy",label:"From",onChange:g,renderInput:a=>e(O,{...a}),value:n.startDate||null}),e(K,{inputFormat:"dd/MM/yyyy",label:"To",onChange:y,renderInput:a=>e(O,{...a}),value:n.endDate||null})]})]}),i("div",{children:[e(B,{sx:{display:"block",mb:2},children:"From customer"}),e(j,{sx:{backgroundColor:a=>a.palette.mode==="dark"?"neutral.800":"neutral.50",borderColor:"divider",borderRadius:1,borderStyle:"solid",borderWidth:1},children:e(H,{sx:{maxHeight:200},children:e(ae,{sx:{py:1,px:1.5},children:Ve.map(a=>{var R;const p=(R=n.customers)==null?void 0:R.includes(a);return e(F,{control:e(ie,{checked:p,onChange:k}),label:a,value:a},a)})})})})]}),e(F,{control:e(V,{checked:n.status==="paid",onChange:D}),label:"Paid only"}),e(F,{control:e(V,{checked:s,onChange:d}),label:"Group by status"})]})]});return C?e(W,{anchor:"left",open:m,PaperProps:{elevation:16,sx:{border:"none",borderRadius:2.5,overflow:"hidden",position:"relative",width:380}},SlideProps:{container:r},variant:"persistent",sx:{p:3},...b,children:S}):e(W,{anchor:"left",hideBackdrop:!0,ModalProps:{container:r,sx:{pointerEvents:"none",position:"absolute"}},onClose:u,open:m,PaperProps:{sx:{maxWidth:"100%",width:380,pointerEvents:"auto",position:"absolute"}},SlideProps:{container:r},variant:"temporary",...b,children:S})};J.propTypes={container:P.any,filters:P.object,onClose:P.func,onFiltersChange:P.func,open:P.bool};var We=function(r){return i("svg",x({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},r,{children:[e("path",{fill:"#fff",fillOpacity:.01,d:"M4 7.8c0-1.6802 0-2.5202.327-3.162a3 3 0 0 1 1.311-1.311C6.2798 3 7.1198 3 8.8 3h6.4c1.6802 0 2.5202 0 3.162.327a2.9997 2.9997 0 0 1 1.311 1.311C20 5.2798 20 6.1198 20 7.8V21l-2.75-2-2.5 2L12 19l-2.75 2-2.5-2L4 21V7.8Z"}),e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m9 10.5 2 2L15.5 8M20 21V7.8c0-1.6802 0-2.5202-.327-3.162a2.9997 2.9997 0 0 0-1.311-1.311C17.7202 3 16.8802 3 15.2 3H8.8c-1.6802 0-2.5202 0-3.162.327a3 3 0 0 0-1.311 1.311C4 5.2798 4 6.1198 4 7.8V21l2.75-2 2.5 2L12 19l2.75 2 2.5-2L20 21Z"})]}))};const Ee=()=>e("div",{children:i(w,{container:!0,spacing:3,children:[e(w,{xs:12,md:6,lg:4,children:e(T,{children:e(A,{children:i(v,{alignItems:"center",direction:"row",spacing:2,children:[e(L,{sx:{height:48,width:48},children:e(Te,{})}),i("div",{children:[e(l,{color:"text.secondary",variant:"body2",children:"Total"}),e(l,{variant:"h6",children:"$5,300.00"}),e(l,{color:"text.secondary",variant:"body2",children:"from 12 invoices"})]})]})})})}),e(w,{xs:12,md:6,lg:4,children:e(T,{children:e(A,{children:i(v,{alignItems:"center",direction:"row",spacing:2,children:[e(L,{sx:{backgroundColor:"success.lightest",color:"success.main",height:48,width:48},children:e(We,{})}),i("div",{children:[e(l,{color:"text.secondary",variant:"body2",children:"Paid"}),e(l,{variant:"h6",children:"$1,439.60"}),e(l,{color:"text.secondary",variant:"body2",children:"from 3 invoices"})]})]})})})}),e(w,{xs:12,md:6,lg:4,children:e(T,{children:e(A,{children:i(v,{alignItems:"center",direction:"row",spacing:2,children:[e(L,{sx:{backgroundColor:"warning.lightest",color:"warning.main",height:48,width:48},children:e(Se,{})}),i("div",{children:[e(l,{color:"text.secondary",variant:"body2",children:"Pending"}),e(l,{variant:"h6",children:"$276.87"}),e(l,{color:"text.secondary",variant:"body2",children:"from 2 invoices"})]})]})})})})]})}),_e=o=>o.reduce((r,n)=>{const{status:s}=n;return{...r,[s]:[...r[s],n]}},{canceled:[],paid:[],pending:[]}),Qe={canceled:"error",paid:"success",pending:"warning"},N=o=>{const{invoice:r,...n}=o,s=Qe[r.status],u=se(r.totalAmount).format("0,0.00"),t=r.issueDate&&E(r.issueDate,"dd/MM/yyyy"),d=r.dueDate&&E(r.dueDate,"dd/MM/yyyy");return i(Le,{sx:{"&:last-child td, &:last-child th":{border:0}},...n,children:[e(I,{width:"25%",children:i(v,{alignItems:"center",direction:"row",spacing:2,component:_,href:Q.dashboard.invoices.details,sx:{display:"inline-flex",textDecoration:"none",whiteSpace:"nowrap"},children:[e(L,{sx:{height:42,width:42},children:Re(r.customer.name)}),i("div",{children:[e(l,{color:"text.primary",variant:"subtitle2",children:r.number}),e(l,{color:"text.secondary",variant:"body2",children:r.customer.name})]})]})}),e(I,{children:i(l,{variant:"subtitle2",children:[r.currency,u]})}),i(I,{children:[e(l,{variant:"subtitle2",children:"Issued"}),e(l,{color:"text.secondary",variant:"body2",children:t})]}),i(I,{children:[e(l,{variant:"subtitle2",children:"Due"}),e(l,{color:"text.secondary",variant:"body2",children:d})]}),e(I,{align:"right",children:e(Me,{color:s,children:r.status})}),e(I,{align:"right",children:e(z,{component:_,href:Q.dashboard.invoices.details,children:e(M,{children:e(ce,{})})})})]})},X=o=>{const{group:r=!1,items:n=[],count:s=0,onPageChange:u=()=>{},onRowsPerPageChange:t,page:d=0,rowsPerPage:m=0}=o;let b;if(r){const h=_e(n),C=Object.keys(h);b=e(v,{spacing:6,children:C.map(f=>{const g=f.charAt(0).toUpperCase()+f.slice(1),y=h[f].length,k=h[f],D=k.length>0;return i(v,{spacing:2,children:[i(l,{color:"text.secondary",variant:"h6",children:[g," ","(",y,")"]}),D&&e(T,{children:e(H,{children:e(Z,{sx:{minWidth:600},children:e($,{children:k.map(S=>e(N,{invoice:S},S.id))})})})})]},g)})})}else b=e(T,{children:e(Z,{children:e($,{children:n.map(h=>e(N,{invoice:h},h.id))})})});return i(v,{spacing:4,children:[b,e(Fe,{component:"div",count:s,onPageChange:u,onRowsPerPageChange:t,page:d,rowsPerPage:m,rowsPerPageOptions:[5,10,25]})]})};X.propTypes={count:P.number,group:P.bool,items:P.array,onPageChange:P.func,onRowsPerPageChange:P.func,page:P.number,rowsPerPage:P.number};const qe=()=>{const[o,r]=c.useState({filters:{customers:[],endDate:void 0,query:"",startDate:void 0},page:0,rowsPerPage:5}),n=c.useCallback(t=>{r(d=>({...d,filters:t,page:0}))},[]),s=c.useCallback((t,d)=>{r(m=>({...m,page:d}))},[]),u=c.useCallback(t=>{r(d=>({...d,rowsPerPage:parseInt(t.target.value,10)}))},[]);return{handleFiltersChange:n,handlePageChange:s,handleRowsPerPageChange:u,state:o}},Ze=o=>{const r=me(),[n,s]=c.useState({invoices:[],invoicesCount:0}),u=c.useCallback(async()=>{try{const t=await ve.getInvoices(o);r()&&s({invoices:t.data,invoicesCount:t.count})}catch(t){console.error(t)}},[o,r]);return c.useEffect(()=>{u()},[o]),{...n}},ln=()=>{const o=c.useRef(null),r=G(g=>g.breakpoints.up("lg")),n=qe(),s=Ze(n.state),[u,t]=c.useState(!0),[d,m]=c.useState(r),b=le();de();const h=c.useCallback(g=>{t(g.target.checked)},[]),C=c.useCallback(()=>{m(g=>!g)},[]),f=c.useCallback(()=>{m(!1)},[]);return i(pe,{children:[e(ue,{title:"Dashboard: Invoice List"}),e(he,{}),e(j,{component:"main",sx:{flexGrow:1,py:8},children:e(ge,{maxWidth:b.stretch?!1:"xl",children:e(j,{ref:o,children:i(w,{container:!0,spacing:3,children:[e(w,{xs:12,lg:4,children:e(J,{container:o.current,filters:n.state.filters,group:u,onFiltersChange:n.handleFiltersChange,onClose:f,onGroupChange:h,open:d})}),e(w,{xs:12,lg:8,children:e(Oe,{open:d,children:i(v,{spacing:4,children:[i(v,{alignItems:"flex-start",direction:"row",justifyContent:"space-between",spacing:3,children:[e("div",{children:e(l,{variant:"h4",children:"Invoices"})}),i(v,{alignItems:"center",direction:"row",spacing:1,children:[e(q,{color:"inherit",startIcon:e(M,{children:e(Be,{})}),onClick:C,children:"Filters"}),e(q,{startIcon:e(M,{children:e(be,{})}),variant:"contained",children:"New"})]})]}),e(Ee,{}),e(X,{count:s.invoicesCount,group:u,items:s.invoices,onPageChange:n.handlePageChange,onRowsPerPageChange:n.handleRowsPerPageChange,page:n.state.page,rowsPerPage:n.state.rowsPerPage})]})})})]})})})})]})};export{ln as default};
