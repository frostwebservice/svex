import{P as h,r as l,j as s,cm as $e,d as e,cn as ge,at as Ge,l as b,k as v,aw as T,q as I,c2 as fe,f as k,bx as ce,D as H,n as j,B as q,da as Z,G as W,R as G,cy as de,ap as be,F as D,T as Ue,a as J,bE as K,b9 as B,c$ as O,s as ve,cI as xe,L as $,cZ as P,p as L,K as Q,m as X,aG as U,bm as He,bn as Ne,bo as Ve,a_ as _e,br as Ye,b8 as Ze,db as Je,aZ as Ke,cB as ue,w as Qe,c as Xe,S as et}from"./app-29987d4d.js";import{u as ee}from"./use-search-params-f7ccb23e.js";import{m as tt,M as at}from"./mail-composer-e72aac5d.js";import{A as R}from"./Attachment01-ac12719d.js";import{I as ye}from"./Image01-4a74049d.js";import{L as we}from"./Link01-38e53170.js";import{F as Ce}from"./FaceSmile-9e2dd2c2.js";import{Q as nt}from"./quill-editor-0ae24e2e.js";import{d as it}from"./deep-copy-ee95be26.js";import{P as ke}from"./Plus-d9be9a46.js";import{S as te}from"./Star01-558bda8c.js";import{g as st}from"./get-initials-d1c6cec7.js";import{u as rt,P as ot}from"./pagination-363c3362.js";import{A as lt}from"./AlertCircle-2f42bd35.js";import{S as ct}from"./Send01-1fe60076.js";import{T as dt}from"./Trash02-a45d905c.js";import{H as ut}from"./Heart-ffc25cbc.js";import{L as mt}from"./ListSubheader-44713c17.js";import"./index-c5136b0f.js";import"./isEqual-ce88e86c.js";import"./LastPage-4f0d7573.js";const ht=tt(()=>({noBorder:{border:"none"}})),pt=`<pre>Dear [Influencer's Name],

I hope this email finds you well.I have been following your work as an influential figure in [your niche], and I am truly impressed by the value you provide to your audience.Your expertise and unique perspective have inspired me.

I am reaching out today because I believe there is a great opportunity for us to collaborate and create something meaningful together.As someone who shares a passion for [your niche], I believe our combined efforts can have a significant impact on our respective audiences.
I have an idea for a collaboration that I believe will be mutually beneficial.Here's a brief overview:
[Provide a concise description of your collaboration idea.Highlight the value it will bring to both your audience and the influencer's audience. Be specific about the type of collaboration, such as a joint blog post, podcast interview, video series, or any other creative concept.]
I truly admire your work and believe that your insights and expertise would greatly enhance the collaboration.Your unique perspective would undoubtedly resonate with our shared audience.

I understand that you are likely approached by numerous individuals, so I want to assure you that I am committed to making this collaboration as seamless and valuable as possible.I am open to discussing any ideas or modifications you may have to ensure it aligns with your goals and values.
If you are interested in exploring this collaboration further, I would be delighted to schedule a call or have a more detailed discussion via email.Please let me know your availability, and I will be happy to accommodate your schedule.
    Thank you for considering this opportunity.I look forward to the possibility of working together and creating something exceptional that will benefit both our audiences.

Warm regards,
    [Your Name][Your Email Address][Your Website or Social Media Handles][Contact Number(Optional)]</pre>`,Se=a=>{const{maximize:t=!1,message:n="",onClose:o,onMaximize:c,onMessageChange:i,onMinimize:r,onSubjectChange:d,onToChange:m,open:p=!1,subject:u="",to:w=""}=a;l.useState(!1),ht();const g=l.useCallback(f=>{d==null||d(f.target.value)},[d]),C=l.useCallback(f=>{m==null||m(f.target.value)},[m]);return p?s($e,{children:[e(ge,{open:t}),s(Ge,{sx:{bottom:f=>`calc((${f.spacing(20)})/3)`,display:"flex",flexDirection:"column",height:f=>`calc(100% - ${f.spacing(20)})`,width:f=>`calc(100% - ${f.spacing(40)})`,outline:"none",position:"fixed",right:f=>`calc((${f.spacing(40)}) / 2)`,zIndex:1400,overflow:"hidden"},elevation:12,children:[s(b,{sx:{alignItems:"center",display:"flex",px:2,py:1},children:[e(v,{variant:"h6",children:"Default Template"}),e(b,{sx:{flexGrow:1}}),e(T,{onClick:o,children:e(I,{children:e(fe,{})})})]}),s(k,{alignItems:"center",direction:"row",spacing:1,children:[e(v,{sx:{mx:2},children:"To"}),e(ce,{disableUnderline:!0,fullWidth:!0,onChange:C,sx:{pt:.5,borderBottom:1,borderColor:"divider"},value:w})]}),s(k,{alignItems:"center",direction:"row",spacing:1,children:[e(v,{sx:{mx:2},children:"Subject"}),e(ce,{disableUnderline:!0,onChange:g,placeholder:"Input Subject",sx:{pt:.5,borderBottom:1,borderColor:"divider",width:"-webkit-fill-available",fontSize:18},value:" Instagram Influencer for a shopping brand - The Rock"})]}),e(nt,{onChange:i,placeholder:"Type your text",sx:{border:"none",flexGrow:1},value:pt}),e(H,{}),s(k,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:3,sx:{p:2},children:[s(k,{alignItems:"center",direction:"row",spacing:1,children:[e(j,{title:"Attach image",children:e(T,{size:"small",children:e(I,{children:e(ye,{})})})}),e(j,{title:"Attach file",children:e(T,{size:"small",children:e(I,{children:e(R,{})})})}),e(T,{children:e(I,{children:e(we,{})})}),e(T,{children:e(I,{children:e(Ce,{})})})]}),e("div",{children:e(q,{variant:"contained",children:"Save Template"})})]})]})]}):null};Se.propTypes={maximize:h.bool,message:h.string,onClose:h.func,onMaximize:h.func,onMessageChange:h.func,onMinimize:h.func,onSubjectChange:h.func,onToChange:h.func,open:h.bool,subject:h.string,to:h.string};const z=new Date,me=[{id:"inbox",name:"Inbox",totalCount:0,type:"system",unreadCount:1},{id:"sent",name:"Sent",totalCount:0,type:"system",unreadCount:0},{id:"favorites",name:"Favorites",totalCount:0,type:"system",unreadCount:0},{id:"template1",name:"Template",totalCount:2,type:"template",unreadCount:0}];z.getTime(),z.getTime(),z.getTime(),z.getTime(),z.getTime();var he=[];class gt{getLabels(t){return Promise.resolve(it(me))}getEmails(t){const{label:n,email:o}=t;return new Promise((c,i)=>{try{(n=="inbox"||n=="sent"||n=="favorites")&&axios.post("/api/get_emails",{email:o,label:n}).then(r=>{const d=r.data;he=r.data;let m=[];const p=me.reduce((u,w)=>(w.type==="custom"&&u.push(w.id),u),[]);if(n&&p.includes(n))m=d.filter(u=>u.labelIds.includes(n));else switch(n){case void 0:case"inbox":m=d.filter(u=>u.folder==="inbox");break;case"template1":m=d.filter(u=>u.folder==="template1");break;case"all":m=[...d];break;case"sent":m=d.filter(u=>u.folder==="sent");break;case"trash":m=d.filter(u=>u.folder===n);break;case"favorites":m=d.filter(u=>u.folder==="favorites");break;case"important":m=d.filter(u=>u.isImportant);break;default:}c(m)})}catch(r){console.error("[Mail Api]: ",r),i(new Error("Internal server error"))}})}getEmail(t){const{emailId:n}=t;return new Promise((o,c)=>{try{const r=he.find(d=>d.id===n);if(!r){c(new Error("Email not found"));return}o(r)}catch(i){console.error("[Mail Api]: ",i),c(new Error("Internal server error"))}})}}const ae=new gt,ft=()=>async a=>{const t=await ae.getLabels();a(Z.actions.getLabels(t))},bt=a=>async t=>{const n=await ae.getEmails(a);t(Z.actions.getEmails(n))},vt=a=>async t=>{const n=await ae.getEmail(a);t(Z.actions.getEmail(n))},E={getEmail:vt,getEmails:bt,getLabels:ft},Ie=a=>{const{attachments:t=[]}=a,n=t.length,o=()=>{let i=de(".download-link").length;for(let r=0;r<i;r++)de(".download-link")[r].click()},c=(i,r=2)=>{if(!Number(i))return"0 Bytes";const d=1024,m=r<0?0:r,p=["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],u=Math.floor(Math.log(i)/Math.log(d));return`${parseFloat((i/Math.pow(d,u)).toFixed(m))} ${p[u]}`};return console.log(t),s(k,{spacing:2,children:[s(v,{variant:"h6",children:[n," Attachments"]}),e(k,{alignItems:"flex-start",direction:"row",spacing:2,flexWrap:"wrap",children:t.map(i=>s(k,{alignItems:"center",direction:"row",spacing:1,sx:{alignItems:"center",cursor:"pointer",display:"flex"},children:[i.type.split("/")[0]=="image"&&e(W,{component:G,src:"data:image/png;base64,"+i.attachment,href:"data:"+i.type+";base64,"+i.attachment,download:i.name,variant:"rounded"}),i.type.split("/")[0]!="image"&&e(W,{variant:"rounded",sx:{backgroundColor:"primary.light",borderRadius:"50%"},component:G,href:"data:"+i.type+";base64,"+i.attachment,download:i.name,children:e(R,{})}),s("div",{children:[e(v,{className:"download-link",noWrap:!0,variant:"subtitle2",component:G,href:"data:"+i.type+";base64,"+i.attachment,download:i.name,children:i.name}),e(v,{color:"text.secondary",variant:"body2",children:c(i.size)})]})]},i.id))}),e("div",{children:e(q,{color:"primary",size:"small",onClick:o,children:"Download all"})})]})};Ie.propTypes={attachments:h.array};be("div")(({theme:a})=>({color:a.palette.text.primary,fontFamily:a.typography.body1.fontFamily,"& > p":{fontSize:14,lineHeight:a.typography.body1.lineHeight,marginBottom:a.spacing(2)}}));const Me=a=>{const{message:t=""}=a;return e("div",{dangerouslySetInnerHTML:{__html:t}})};Me.propTypes={message:h.string};const xt=a=>{const t=l.useRef(null),[n,o]=l.useState(""),c=l.useCallback(r=>{o(r.target.value)},[]),i=l.useCallback(()=>{var r;(r=t.current)==null||r.click()},[]);return s(D,{children:[e(b,{sx:{p:3},...a,children:e(k,{alignItems:"flex-start",direction:"row",spacing:2,children:s(b,{sx:{flexGrow:1},children:[e(Ue,{sx:{border:"1px solid lightgrey",borderRadius:"8px"},fullWidth:!0,maxRows:7,minRows:3,multiline:!0,onChange:c,placeholder:"Type your replay",value:n,variant:"outlined"}),s(k,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:3,sx:{mt:2},children:[s(k,{alignItems:"center",direction:"row",spacing:1,children:[e(j,{title:"Attach image",children:e(T,{onClick:i,size:"small",children:e(I,{children:e(ye,{})})})}),e(j,{title:"Attach file",children:e(T,{onClick:i,size:"small",children:e(I,{children:e(R,{})})})}),e(T,{children:e(I,{children:e(we,{})})}),e(T,{children:e(I,{children:e(Ce,{})})})]}),e("div",{children:e(q,{variant:"contained",children:"Send Email"})})]})]})})}),e("input",{hidden:!0,ref:t,type:"file"})]})},Te=a=>{const{backHref:t,uid:n,createdAt:o,from:c,to:i,folder:r="inbox",onSidebarToggle:d,currentLabelId:m="inbox"}=a,p=J(),u=K(y=>y.breakpoints.up("md")),w=B(new Date(o),"MMMM d yyyy, h:mm:ss a"),[g,C]=l.useState(!1),f=O(y=>y.mail.labels),S=y=>{C(!0),axios.post("/api/del_mail",{uid:y,label:r,email:JSON.parse(localStorage.getItem("email"))}).then(M=>{C(!1),m=="inbox"&&p.push("/dashboard/mail"),m=="sent"&&p.push("/dashboard/mail?label=sent"),m=="favorites"&&p.push("/dashboard/mail?label=favorites")}).catch(M=>{})};return s("div",{children:[s(k,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:2,sx:{p:2},children:[g==!0?s(b,{sx:{display:"flex",textAlign:"center"},children:[e(ve,{}),e(v,{sx:{display:"inline",fontSize:18,fontWeight:700,p:1},children:"Removing..."})]}):e(D,{}),s("div",{children:[e(T,{onClick:d,children:e(I,{children:e(xe,{})})}),e(v,{sx:{display:"inline",fontSize:18,fontWeight:700},children:m==null?"Inbox":f.map(y=>{if(y.id==m)return y.name})})]})]}),e(H,{}),s(k,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:2,sx:{p:3},children:[r=="inbox"?s(k,{alignItems:"center",direction:"row",spacing:2,children:[e(W,{src:`https://ui-avatars.com/api/?name=${c.email}&background=2970FF&color=fff&rounded=true`}),s("div",{children:[e(v,{component:"span",variant:"subtitle2",children:c.name})," ",e($,{color:"text.secondary",component:"span",variant:"body2",children:c.email}),s(v,{color:"text.secondary",variant:"subtitle2",children:["To:"," ",i.map(y=>e($,{color:"inherit",children:y.email},y.email))]})]})]}):s(k,{alignItems:"center",direction:"row",spacing:2,children:[e(W,{src:`https://ui-avatars.com/api/?name=${c.email}&background=2970FF&color=fff&rounded=true`}),s("div",{children:[e(v,{component:"span",variant:"subtitle2",children:c.name})," ",e($,{color:"text.secondary",component:"span",variant:"body2",children:c.email}),s(v,{color:"text.secondary",variant:"subtitle2",children:["To:"," ",i.map(y=>e($,{color:"inherit",children:y.email},y.email))]})]})]}),e(k,{alignItems:"center",direction:"row",spacing:1,children:u&&s(D,{children:[w&&e(v,{color:"text.secondary",noWrap:!0,variant:"caption",children:w}),e(j,{title:"Delete",children:e(T,{onClick:()=>S(n),children:e("img",{src:"/assets/icons/trash.png",width:15,height:15})})})]})})]})]})};Te.propTypes={backHref:h.string.isRequired,from:h.object.isRequired,to:h.array.isRequired};const yt=a=>{const t=P(),n=O(o=>o.mail.emails.byId[a]);return l.useEffect(()=>{t(E.getEmail({emailId:a}))},[a]),n},Ae=a=>{const{emailId:t,currentLabelId:n,onSidebarToggle:o}=a,c=yt(t);if(console.log(c),!c)return null;const i=n&&n!=="inbox"?L.dashboard.mail+`?label=${n}`:L.dashboard.mail,r=!!c.message,d=c.attachments&&c.attachments.length>0;return s(k,{sx:{flexGrow:1,height:"100%",overflowY:"auto"},children:[e(Te,{uid:t,backHref:i,createdAt:new Date(c.createdAt),currentLabelId:n,folder:c.realfolder,from:c.from,onSidebarToggle:o,to:c.to}),s(b,{sx:{flexGrow:1,px:3,py:6},children:[e(v,{variant:"h3",children:c.subject}),s(k,{sx:{mt:2},spacing:6,children:[r&&e(Me,{message:c.message}),d&&e(Ie,{attachments:c.attachments})]})]}),e(xt,{})]})};Ae.propTypes={emailId:h.string.isRequired,currentLabelId:h.string};const wt=be("div",{shouldForwardProp:a=>a!=="open"})(({theme:a,open:t})=>({flexGrow:1,overflow:"hidden",[a.breakpoints.up("md")]:{marginLeft:-280},transition:a.transitions.create("margin",{easing:a.transitions.easing.sharp,duration:a.transitions.duration.leavingScreen}),...t&&{[a.breakpoints.up("md")]:{marginLeft:0},transition:a.transitions.create("margin",{easing:a.transitions.easing.easeOut,duration:a.transitions.duration.enteringScreen})}}));var Ct=function(t){return e("svg",Q({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},t,{children:e("path",{fill:"#fff",fillOpacity:.01,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 7.8c0-1.6802 0-2.5202.327-3.162a3 3 0 0 1 1.311-1.311C7.2798 3 8.1198 3 9.8 3h4.4c1.6802 0 2.5202 0 3.162.327a2.9997 2.9997 0 0 1 1.311 1.311C19 5.2798 19 6.1198 19 7.8V21l-7-4-7 4V7.8Z"})}))};const je=a=>{const{email:t,onDeselect:n,onSelect:o,onCompose:c,selected:i,href:r,...d}=a,m=P(),u=ee().get("label")||void 0,w=l.useCallback(M=>{M.target.checked?o==null||o():n==null||n()},[o,n]),g=B(new Date(t.createdAt),"MMM dd"),C=B(new Date(t.createdAt),"MMM dd, hh:mm aa"),f=!!(t.attachments&&t.attachments.length>0),S=!!(t.attachments&&t.attachments.length>1);J();const y=(M,N,V,_)=>{axios.post("/api/update_fav",{uid:N,flag:M,email:JSON.parse(localStorage.getItem("email")),label:V}).then(Y=>{m(E.getEmails({label:_,email:JSON.parse(localStorage.getItem("email"))}))}).catch(Y=>{})};return s(b,{sx:{alignItems:"center",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"divider",display:"flex",p:2,...!t.isUnread&&{position:"relative","&:before":{backgroundColor:"primary.main",content:'" "',height:"100%",left:0,position:"absolute",top:0,width:4},"& $name, & $subject":{fontWeight:600}},...i&&{backgroundColor:"primary.lightest"},...!i&&{"&:hover":{backgroundColor:"action.hover"}}},...d,children:[s(b,{sx:{alignItems:"center",display:{md:"flex",xs:"none"},mr:1},children:[e(X,{checked:i,onChange:w}),e(j,{title:"Starred",children:e(T,{onClick:()=>y(t.favorite,t.id,t.realfolder,t.folder),children:e(I,{sx:{...t.favorite&&{color:"warning.main","& path":{fill:M=>M.palette.warning.main,fillOpacity:1}}},children:e(te,{})})})})]}),s(b,{component:G,href:r,sx:{alignItems:"center",cursor:"pointer",display:"contents",flexGrow:1,flexWrap:{xs:"wrap",md:"wrap"},minWidth:1,textDecoration:"none"},children:[t.realfolder=="inbox"?s(b,{sx:{alignItems:"center",display:"flex"},children:[e(W,{src:`https://ui-avatars.com/api/?name=${t.from.email}&background=2970FF&color=fff&rounded=true`}),e(v,{color:"text.primary",sx:{width:120,ml:2,...!t.isUnread&&{fontWeight:600}},noWrap:!0,variant:"body2",children:t.from.email})]}):s(b,{sx:{alignItems:"center",display:"flex"},children:[e(W,{src:`https://ui-avatars.com/api/?name=${t.to[0].email}&background=2970FF&color=fff&rounded=true`}),s(v,{color:"text.primary",sx:{width:120,ml:2,...!t.isUnread&&{fontWeight:600}},noWrap:!0,variant:"body2",children:[t.to.map(M=>M.email),t.to[0].email]})]}),s(b,{sx:{ml:{xs:0,md:2},my:{xs:2,md:0},overflow:"hidden",width:"-webkit-fill-available"},children:[s(b,{sx:{alignItems:"center",display:"flex",maxWidth:800,width:"100%"},children:[t.isUnread.seen=="Seen"?e(v,{color:"text.primary",sx:{fontWeight:400,minWidth:100,maxWidth:400,mr:1},noWrap:!0,variant:"body2",children:t.subject}):e(v,{color:"text.primary",sx:{fontWeight:700,minWidth:100,maxWidth:400,mr:1},noWrap:!0,variant:"body2",children:t.subject}),s(v,{color:"text.secondary",noWrap:!0,variant:"body2",children:["—",t.plain]})]}),f&&s(b,{sx:{mt:1,maxWidth:800},children:[e(U,{icon:e(I,{children:e(R,{})}),label:t.attachments[0].name,size:"small"}),S&&e(U,{label:"+"+(t.attachments.length-1).toString(),size:"small",sx:{ml:1}})]})]}),e(b,{sx:{margin:"auto"},children:e(v,{color:"text.secondary",variant:"caption",alignItems:"center",sx:{display:"block",textAlign:{xs:"left",md:"right"},whiteSpace:"nowrap",width:"100%"},children:u&&u.search("template")>=0?"Last used-"+C:g})})]})]})};je.propTypes={email:h.object.isRequired,href:h.string.isRequired,onDeselect:h.func,onSelect:h.func,selected:h.bool.isRequired};const We=a=>{const{email:t,onDeselect:n,onSelect:o,onCompose:c,selected:i,href:r,...d}=a,p=ee().get("label")||void 0,u=l.useCallback(S=>{S.target.checked?o==null||o():n==null||n()},[o,n]),w=B(new Date(t.createdAt),"MMM dd"),g=B(new Date(t.createdAt),"MMM dd, hh:mm aa"),C=!!(t.attachments&&t.attachments.length>0),f=!!(t.attachments&&t.attachments.length>1);return s(b,{sx:{alignItems:"center",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"divider",display:"flex",p:2,...!t.isUnread&&{position:"relative","&:before":{backgroundColor:"primary.main",content:'" "',height:"100%",left:0,position:"absolute",top:0,width:4},"& $name, & $subject":{fontWeight:600}},...i&&{backgroundColor:"primary.lightest"},...!i&&{"&:hover":{backgroundColor:"action.hover"}}},...d,children:[s(b,{sx:{alignItems:"center",display:{md:"flex",xs:"none"},mr:1},children:[e(X,{checked:i,onChange:u}),e(j,{title:"Starred",children:e(T,{children:e(I,{sx:{...t.isStarred&&{color:"warning.main","& path":{fill:S=>S.palette.warning.main,fillOpacity:1}}},children:e(te,{})})})})]}),s(b,{sx:{alignItems:"center",cursor:"pointer",display:"flex",flexGrow:1,flexWrap:{xs:"wrap",md:"wrap"},minWidth:1,textDecoration:"none"},children:[s(b,{sx:{alignItems:"center",display:"flex"},children:[e(W,{src:t.from.avatar||void 0,children:st(t.from.name)}),e(v,{color:"text.primary",sx:{width:120,ml:2,...!t.isUnread&&{fontWeight:600}},noWrap:!0,variant:"body2",children:t.from.name})]}),s(b,{sx:{ml:{xs:0,md:2},my:{xs:2,md:0},overflow:"hidden",width:"fit-content"},children:[s(b,{sx:{alignItems:"center",display:"flex",maxWidth:800,width:"100%"},children:[e(v,{color:"text.primary",sx:{fontWeight:600,minWidth:100,maxWidth:400,mr:1},noWrap:!0,variant:"body2",children:t.subject}),s(v,{color:"text.secondary",noWrap:!0,variant:"body2",children:["—",t.message]})]}),C&&s(b,{sx:{mt:1,maxWidth:800},children:[e(U,{icon:e(I,{children:e(R,{})}),label:t.attachments[0].name,size:"small"}),f&&e(U,{label:"+1",size:"small",sx:{ml:1}})]})]}),e(b,{children:e(v,{color:"text.secondary",variant:"caption",alignItems:"center",sx:{display:"block",textAlign:{xs:"left",md:"right"},whiteSpace:"nowrap",width:"100%"},children:p&&p.search("template")>=0?"Last used-"+g:w})})]})]})};We.propTypes={email:h.object.isRequired,href:h.string.isRequired,onDeselect:h.func,onSelect:h.func,selected:h.bool.isRequired};const kt=a=>{const t=P(),{emails:n}=O(o=>o.mail);return l.useEffect(()=>{t(E.getEmails({label:a??"inbox",email:JSON.parse(localStorage.getItem("email"))}))},[a]),n},St=a=>{const[t,n]=l.useState([]);l.useEffect(()=>{n([])},[a]);const o=l.useCallback(()=>{n([...a])},[a]),c=l.useCallback(d=>{n(m=>m.includes(d)?m:[...m,d])},[]),i=l.useCallback(()=>{n([])},[]),r=l.useCallback(d=>{n(m=>m.filter(p=>p!==d))},[]);return{handleDeselectAll:i,handleDeselectOne:r,handleSelectAll:o,handleSelectOne:c,selected:t}},Le=a=>{const{currentLabelId:t,disCount:n,onSidebarToggle:o,onCompose:c,...i}=a,r=kt(t),[d,m]=l.useState(!1),p=P(),u=O(x=>x.mail.labels),[w,g]=l.useState(0);l.useState([]),l.useState([]),l.useEffect(()=>{g(1),m(!0)},[t]);const{handleDeselectAll:C,handleDeselectOne:f,handleSelectAll:S,handleSelectOne:y,selected:M}=St(r.allIds),N=l.useCallback(x=>{x.target.checked?S():C()},[S,C]),V=x=>{x.isUnread.seen||axios.post("/api/unread_set",{uid:x.id,email:JSON.parse(localStorage.getItem("email"))}).then(A=>{p(E.getEmails({label:"inbox",email:JSON.parse(localStorage.getItem("email"))}))}).catch(A=>{})},_=M.length===r.allIds.length,Y=M.length>0&&M.length<r.allIds.length,ze=r.allIds.length>0,[ne,ie]=l.useState(r.allIds);l.useEffect(()=>{w==1&&m(!1),g(w+1),w>=2&&g(0),ie(r.allIds)},[r]);const[De,Be]=l.useState(1),se=10,qe=Math.ceil(ne.length/se),re=rt(ne,se),Oe=(x,A)=>{Be(A),re.jump(A)},oe=l.useRef(null),Re=l.useCallback(x=>{var le;x.preventDefault();const A=((le=oe.current)==null?void 0:le.value)||"";let F=r.allIds.filter(Fe=>!(typeof A<"u"&&A!==""&&!(r.byId[Fe].subject||"").toLowerCase().includes(A.toLowerCase())));ie(F)},[]);return s(k,{sx:{height:"100%",overflowY:"auto"},...i,children:[e(k,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:2,sx:{p:2},children:s("div",{children:[e(T,{onClick:o,children:e(I,{children:e(xe,{})})}),e(v,{sx:{display:"inline",fontSize:18,fontWeight:700},children:t==null?"Inbox":u.map(x=>{if(x.id==t)return x.name})})]})}),e(H,{}),d==!0?s(ge,{open:d,onClick:x=>x.preventDefault(),sx:{color:"#fff",zIndex:x=>x.zIndex.drawer+1},children:[e(ve,{color:"inherit"}),e(v,{sx:{display:"inline",fontSize:18,fontWeight:700,p:1},children:"Loading..."})]}):ze?s(D,{children:[s(b,{sx:{alignItems:"center",borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1,display:{xs:"none",md:"flex"},p:2},children:[e(X,{checked:_,indeterminate:Y,onChange:N}),e(v,{variant:"subtitle2",children:"Select all"}),e(b,{sx:{flexGrow:1}}),s(k,{alignItems:"center",direction:"row",spacing:1,children:[t&&t.search("template")>=0?e(q,{onClick:c,startIcon:e(I,{children:e(ke,{})}),variant:"contained",children:"New Template"}):"",e(b,{component:"form",onSubmit:Re,sx:{flexGrow:1},children:e(He,{fullWidth:!0,inputProps:{ref:oe},placeholder:"Search email",size:"small",startAdornment:e(Ne,{position:"start",children:e(I,{children:e(Ve,{})})}),sx:{width:200}})}),e(ot,{count:qe,page:De,variant:"outlined",shape:"rounded",onChange:Oe})]})]}),e("div",{children:re.currentData().map(x=>{const A=M.includes(x),F=t&&t!=="inbox"?L.dashboard.mail+`?emailId=${x}&label=${t}`:L.dashboard.mail+`?emailId=${x}`;return t&&t.search("template")>=0?e(We,{email:r.byId[x],href:F,onCompose:c,onClick:c,onDeselect:()=>f(x),onSelect:()=>y(x),selected:A},x):r.byId[x]&&e(je,{email:r.byId[x],href:F,onClick:()=>V(r.byId[x]),onCompose:c,onDeselect:()=>f(x),onSelect:()=>y(x),selected:A},x)})})]}):s(k,{alignItems:"center",justifyContent:"center",spacing:2,sx:{flexGrow:1,p:2},children:[e(b,{component:"img",src:"/assets/errors/error-404.png",sx:{height:"auto",maxWidth:120}}),e(v,{color:"text.secondary",variant:"h5",children:"There are no emails"})]})]})};Le.propTypes={currentLabelId:h.string,onSidebarToggle:h.func};var It=function(t){return s("svg",Q({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},t,{children:[e("path",{fill:"#fff",fillOpacity:.01,d:"M14.7301 4H9.2699c-.9692 0-1.4538 0-1.8816.1476a2.7 2.7 0 0 0-1.0088.6235c-.3234.3166-.54.75-.9735 1.617l-1.95 3.8998c-.17.3401-.255.5102-.315.6885a2.6993 2.6993 0 0 0-.115.4866C3 11.6493 3 11.8395 3 12.2198V14.08c0 1.5121 0 2.2682.2943 2.8458.2588.508.6719.9211 1.18 1.1799.5775.2943 1.3336.2943 2.8457.2943h9.36c1.5121 0 2.2682 0 2.8458-.2943a2.6996 2.6996 0 0 0 1.1799-1.1799C21 16.3482 21 15.5921 21 14.08v-1.8602c0-.3803 0-.5705-.0261-.7568a2.6918 2.6918 0 0 0-.1149-.4866c-.0599-.1783-.145-.3484-.3151-.6885L18.594 6.388c-.4334-.8668-.6501-1.3003-.9735-1.617a2.7 2.7 0 0 0-1.0088-.6234C16.1839 4 15.6993 4 14.7301 4Z"}),e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.45 11.2h3.0438a1.628 1.628 0 0 1 1.4562.9c.2758.5516.8396.9 1.4562.9h5.1876a1.628 1.628 0 0 0 1.4562-.9 1.628 1.628 0 0 1 1.4562-.9H20.55M9.27 4h5.46c.9692 0 1.4538 0 1.8816.1476a2.7 2.7 0 0 1 1.0088.6235c.3234.3166.5401.75.9735 1.617l1.9499 3.8998c.1701.3401.2552.5102.3151.6885.0533.1583.0918.3212.1149.4866.0261.1863.0261.3765.0261.7568V14.08c0 1.5121 0 2.2682-.2943 2.8458a2.6996 2.6996 0 0 1-1.1799 1.1799c-.5776.2943-1.3337.2943-2.8458.2943H7.32c-1.5121 0-2.2682 0-2.8458-.2943a2.6998 2.6998 0 0 1-1.18-1.1799C3 16.3482 3 15.5921 3 14.08v-1.8602c0-.3803 0-.5705.026-.7568a2.6993 2.6993 0 0 1 .115-.4866c.06-.1783.145-.3484.315-.6885l1.95-3.8999c.4334-.8668.6501-1.3003.9735-1.617a2.7 2.7 0 0 1 1.0088-.6234C7.8161 4 8.3007 4 9.2699 4Z"})]}))},Mt=function(t){return s("svg",Q({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},t,{children:[e("path",{fill:"#fff",fillOpacity:.01,d:"M2.9373 11.9373c-.346-.3459-.5189-.5189-.6426-.7207a2.0013 2.0013 0 0 1-.2394-.5781C2 10.4083 2 10.1637 2 9.6745V5.2c0-1.1201 0-1.6802.218-2.108a2 2 0 0 1 .874-.874C3.5198 2 4.08 2 5.2 2h4.4745c.4892 0 .7338 0 .964.0553.204.049.3991.1298.5781.2394.2018.1237.3748.2966.7207.6426l7.6686 7.6686c1.188 1.188 1.7821 1.7821 2.0046 2.467a2.9996 2.9996 0 0 1 0 1.8541c-.2225.685-.8166 1.2791-2.0046 2.4671l-2.2118 2.2118c-1.188 1.188-1.7821 1.7821-2.4671 2.0046a2.9996 2.9996 0 0 1-1.8541 0c-.6849-.2225-1.279-.8166-2.467-2.0046l-7.6686-7.6686Z"}),e("path",{fill:"#fff",fillOpacity:.01,d:"M8.5 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"}),e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 8h.01M2 5.2v4.4745c0 .4892 0 .7338.0553.964.049.204.1298.3991.2394.5781.1237.2018.2966.3748.6426.7207l7.6686 7.6686c1.188 1.188 1.7821 1.7821 2.467 2.0046a2.9996 2.9996 0 0 0 1.8541 0c.685-.2225 1.2791-.8166 2.4671-2.0046l2.2118-2.2118c1.188-1.188 1.7821-1.7821 2.0046-2.4671a2.9996 2.9996 0 0 0 0-1.8541c-.2225-.6849-.8166-1.279-2.0046-2.467l-7.6686-7.6686c-.3459-.346-.5189-.5189-.7207-.6426a2.0013 2.0013 0 0 0-.5781-.2394C10.4083 2 10.1637 2 9.6745 2H5.2c-1.1201 0-1.6802 0-2.108.218a2 2 0 0 0-.874.874C2 3.5198 2 4.08 2 5.2ZM8.5 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"})]}))};const Tt={all:e(Ze,{}),inbox:e(It,{}),sent:e(ct,{}),trash:e(dt,{}),drafts:e(Je,{}),spam:e(lt,{}),starred:e(te,{}),important:e(Ct,{}),favorites:e(ut,{})},At=a=>a.type==="system"?Tt[a.id]:e(Mt,{}),jt=a=>a.type==="custom"&&a.color||"inherit",Pe=a=>{const{active:t,unread:n,label:o,...c}=a,i=At(o),r=jt(o);return o.unreadCount&&o.unreadCount>0,e(_e,{disableGutters:!0,disablePadding:!0,sx:{"& + &":{mt:1}},...c,children:s(Ye,{sx:{borderRadius:1,color:"text.secondary",flexGrow:1,fontSize:d=>d.typography.button.fontSize,fontWeight:d=>d.typography.button.fontWeight,justifyContent:"flex-start",lineHeight:d=>d.typography.button.lineHeight,py:1,px:2,textAlign:"left","&:hover":{backgroundColor:"action.hover"},...t&&{backgroundColor:"action.selected",color:"text.primary"}},children:[e(I,{sx:{color:r,mr:1},children:i}),e(b,{sx:{flexGrow:1},children:o.name}),n!=0&&o.id=="inbox"&&e(v,{color:"inherit",variant:"subtitle2",children:n})]})})};Pe.propTypes={active:h.bool,label:h.object.isRequired,onClick:h.func};const Wt=a=>{const t={system:[],template:[],custom:[]};return a.forEach(n=>{n.type==="system"?t.system.push(n):n.type==="template"?t.template.push(n):t.custom.push(n)}),t},Ee=a=>{const{currentLabelId:t="inbox",container:n,labels:o,unread:c,onClose:i,onCompose:r,open:d,...m}=a,p=J(),u=K(f=>f.breakpoints.up("md")),w=l.useCallback(f=>{u||i==null||i();const S=f.id!=="inbox"?L.dashboard.mail+`?label=${f.id}`:L.dashboard.mail;p.push(S)},[p,u,i]),g=Wt(o),C=s("div",{children:[s(k,{alignItems:"center",direction:"row",spacing:2,sx:{pt:2,px:2},children:[e(v,{variant:"h5",sx:{flexGrow:1},children:"Mailbox"}),!u&&e(T,{onClick:i,children:e(I,{children:e(fe,{})})})]}),e(b,{sx:{p:2},children:e(q,{fullWidth:!0,onClick:r,startIcon:e(I,{children:e(ke,{})}),sx:{mt:2},variant:"contained",children:"Compose"})}),e(b,{sx:{pb:2,px:2},children:Object.keys(g).map(f=>s(l.Fragment,{children:[f==="template"&&e(mt,{disableSticky:!0,children:e(v,{color:"text.secondary",variant:"overline",children:"Templates"})}),e(Ke,{disablePadding:!0,children:g[f].map(S=>{const y=t===S.id;return e(Pe,{active:y,unread:c,label:S,onClick:()=>w(S)},S.id)})})]},f))})]});return u?e(ue,{anchor:"left",open:d,PaperProps:{sx:{position:"relative",width:280}},SlideProps:{container:n},variant:"persistent",...m,children:C}):e(ue,{anchor:"left",hideBackdrop:!0,ModalProps:{container:n,sx:{pointerEvents:"none",position:"absolute"}},onClose:i,open:d,PaperProps:{sx:{maxWidth:"100%",width:280,pointerEvents:"auto",position:"absolute"}},SlideProps:{container:n},variant:"temporary",...m,children:C})};Ee.propTypes={container:h.any,currentLabelId:h.string,labels:h.array.isRequired,onClose:h.func,onCompose:h.func,open:h.bool};const Lt=()=>{const a=P(),t=O(o=>o.mail.labels),n=l.useCallback(()=>{a(E.getLabels())},[a]);return l.useEffect(()=>{n()},[]),t},pe=()=>{const a={isFullScreen:!1,isOpen:!1,message:"",subject:"",to:"",loading:!1},t=P(),[n,o]=l.useState(a),c=l.useCallback(()=>{o(g=>({...g,isOpen:!0}))},[]),i=l.useCallback(()=>{o(a)},[]),r=l.useCallback(()=>{o(g=>({...g,isFullScreen:!0}))},[]),d=l.useCallback(()=>{o(g=>({...g,isFullScreen:!1}))},[]),m=l.useCallback(g=>{o(C=>({...C,message:g}))},[]),p=l.useCallback(g=>{o(C=>({...C,subject:g}))},[]),u=l.useCallback(g=>{o(C=>({...C,to:g}))},[]);return{...n,handleClose:i,handleMaximize:r,handleMessageChange:m,handleMinimize:d,handleSubmit:()=>{o(g=>({...g,loading:!0})),axios.post("/api/send_mail",{to:n.to,subject:n.subject,message:n.message,email:JSON.parse(localStorage.getItem("email"))}).then(g=>{o(C=>({...C,loading:!1})),t(E.getEmails({label:searchParams.get("label")||"inbox",email:JSON.parse(localStorage.getItem("email"))})),i()}).catch(g=>{})},handleOpen:c,handleSubjectChange:p,handleToChange:u}},Pt=()=>{const a=K(r=>r.breakpoints.up("md")),[t,n]=l.useState(a),o=l.useCallback(()=>{n(!!a)},[a]);l.useEffect(()=>{o()},[a]);const c=l.useCallback(()=>{n(r=>!r)},[]),i=l.useCallback(()=>{n(!1)},[]);return{handleToggle:c,handleClose:i,open:t}},Et=a=>{const{emails:t}=a;l.useState(!1),l.useEffect(()=>{let y=0;t.allIds.map(M=>{t.byId[M].isUnread.seen||y++}),f(y)},[t]);let n={time:new Date().getTime(),value:"email",expire:3e6},o=JSON.stringify(n);localStorage.setItem("time_token",o);const c=l.useRef(null),i=ee(),r=i.get("emailId"),d=i.get("label")||void 0,m=Lt(),p=pe(),u=pe(),w=Pt(),[g,C]=l.useState(0),f=y=>{C(y)};Xe();const S=r?"details":"list";return s(D,{children:[e(et,{title:"Dashboard: Mail"}),e(H,{}),e(b,{component:"main",sx:{backgroundColor:"background.paper",flex:"1 1 auto",overflow:"hidden",position:"relative"},children:s(b,{ref:c,sx:{bottom:0,display:"flex",left:0,position:"absolute",right:0,top:0},children:[e(Ee,{container:c.current,currentLabelId:d,labels:m,unread:g,onClose:w.handleClose,onCompose:p.handleOpen,open:w.open}),s(wt,{open:w.open,children:[S==="details"&&e(Ae,{currentLabelId:d,onSidebarToggle:w.handleToggle,emailId:r.split("-")[0]}),S==="list"&&e(Le,{currentLabelId:d,onSidebarToggle:w.handleToggle,onCompose:u.handleOpen,disCount:f})]})]})}),e(at,{maximize:p.isFullScreen,message:p.message,onClose:p.handleClose,onMessageChange:p.handleMessageChange,onMinimize:p.handleMinimize,onSubjectChange:p.handleSubjectChange,onSubmit:p.handleSubmit,onToChange:p.handleToChange,open:p.isOpen,subject:p.subject,loading:p.loading,to:p.to}),e(Se,{maximize:u.isFullScreen,message:u.message,onClose:u.handleClose,onMessageChange:u.handleMessageChange,onMinimize:u.handleMinimize,onSubjectChange:u.handleSubjectChange,onToChange:u.handleToChange,open:u.isOpen,subject:u.subject,to:u.to})]})},zt=a=>({emails:a.mail.emails}),na=Qe(zt)(Et);export{na as default};
