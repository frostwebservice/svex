import{v as B,d as e,C as M,j as n,f as s,D,k as o,P as J,F as p,S as L,l as I,aM as R,B as w,q as j,aO as E,R as z,p as T,o as P,r as d,w as G,e as V,E as q,L as H,aN as N,c0 as W,c5 as $,aT as K,c as U,A as Y,bj as Q,bk as X,bo as Z,au as F,bi as ee,u as te}from"./app-f6d0c162.js";import{C as ne}from"./ChevronLeft-f39225f4.js";import{j as re}from"./index-ac2940ba.js";import"./company-jobs-dee49659.js";import{J as ie}from"./company-card-a58adb20.js";import{M as ae}from"./mail-composer-d9f457ec.js";import"./multi-select-d202d87d.js";import{g as oe}from"./get-initials-d1c6cec7.js";import{H as O}from"./Heart-9c6378e0.js";/* empty css               */import"./deep-copy-ee95be26.js";import"./index-1f81a8ca.js";import"./Users01-13460c05.js";import"./Attachment01-7a141521.js";import"./Image01-a6b007d7.js";import"./Link01-944216e9.js";import"./FaceSmile-590c1d1a.js";import"./quill-editor-7fc4a32d.js";import"./isEqual-e3290c3c.js";const se=h=>{var l,C,u;const{jobs:t,order:m,...f}=h,r=t==null?void 0:t.filter(v=>v.id==m),g=()=>{if(r&&r[0])return r[0].barter?"Barter":r[0].revenue?"Revenue":r[0].custom?"Custom":"Paid"},S=()=>{if(r&&r[0]){if(r[0].paid=="flexible")return"Flexible";if(r[0].paid=="maxbudget")return"Max Budget";if(r[0].paid=="Budget Range")return"Budget Range"}},b=(v=new Date)=>{var y=Math.floor((new Date().getTime()-new Date(v).getTime())/1e3),a=y/31536e3;return a>1?Math.floor(a)+" years":(a=y/2592e3,a>1?Math.floor(a)+" months":(a=y/86400,a>1?Math.floor(a)+" days":(a=y/3600,a>1?Math.floor(a)+" hours":(a=y/60,a>1?Math.floor(a)+" minutes":Math.floor(y)+" seconds"))))};return e(M,{variant:"outlined",...f,children:n(s,{divider:e(D,{}),sx:{py:1},children:[n(s,{alignItems:"flex-start",direction:"row",flexWrap:"wrap",justifyContent:"space-between",sx:{px:2,py:1.5},children:[e(o,{variant:"subtitle1",sx:{fontSize:16},children:r&&((l=r[0])==null?void 0:l.title)}),e(s,{alignItems:"center",direction:"row",spacing:2,children:n(o,{color:"text.secondary",variant:"caption",style:{fontSize:12},children:[b(r&&((C=r[0])==null?void 0:C.created_at))," ago"]})})]}),n(s,{alignItems:"flex-start",direction:"row",flexWrap:"wrap",sx:{px:2,pb:1.5},children:[e(o,{color:"text.secondary",variant:"caption",children:"Status • Actively Hiring"}),e(o,{color:"text.secondary",style:{marginLeft:40},variant:"caption",children:"Number of applicants • 15 - 20"}),n(o,{color:"text.secondary",style:{marginLeft:40},variant:"caption",children:["Budget • ",S()]}),n(o,{color:"text.secondary",style:{marginLeft:40},variant:"caption",children:["Job type • ",r&&((u=r[0])==null?void 0:u.shoutoutonly)=="shoutoutonly"?"Shoutout Only":"Content creation & Shoutouts"]}),n(o,{color:"text.secondary",style:{marginLeft:40},variant:"caption",children:["Payment type • ",g()]})]})]})})},le=h=>({jobs:h.jobs.jobs}),ce=B(le)(se);J.object.isRequired;const de=()=>n(p,{children:[e(L,{title:"Error: Server Error"}),e(I,{component:"main",sx:{alignItems:"center",display:"flex",flexGrow:1,py:"80px"},children:n(R,{maxWidth:"lg",children:[e(I,{sx:{display:"flex",justifyContent:"center",mb:6},children:e(I,{alt:"Internal server error",component:"img",src:"/assets/errors/empty.png",sx:{height:"auto",maxWidth:"100%",width:145}})}),e(o,{align:"center",sx:{fontWeight:700,fontSize:28},children:"There are no influencers invited yet!"}),e(o,{align:"center",color:"text.secondary",sx:{mt:.5,fontSize:16},children:"Tap below to create an outreach group"}),e(I,{sx:{display:"flex",justifyContent:"center",mt:2},children:e(w,{endIcon:e(j,{children:e(E,{})}),component:z,variant:"contained",href:T.index,children:"Create outreach group"})})]})})]}),he=h=>{const{followers:t,engagement:m,invited:f,createdAt:r,category:g,...S}=h;return console.log(r),e(M,{variant:"outlined",...S,children:e(s,{divider:e(D,{}),children:n(s,{alignItems:"center",direction:"row",justifyContent:"space-between",flexWrap:"wrap",sx:{px:2,py:1.5},children:[n(s,{direction:"row",children:[n(s,{alignItems:"flex-start",spacing:2,direction:{xs:"column",sm:"column",md:"column"},sx:{mr:10},children:[e(o,{color:"text.primary",noWrap:!0,variant:"overline",sx:{fontSize:14,fontWeight:700},children:t}),e(o,{color:"text.secondary",noWrap:!0,sx:{fontSize:12},children:"Followers"})]}),n(s,{alignItems:"flex-start",spacing:2,direction:{xs:"column",sm:"column",md:"column"},sx:{mr:10},children:[e(o,{color:"text.primary",noWrap:!0,variant:"overline",sx:{fontSize:14,fontWeight:700},children:m}),e(o,{color:"text.secondary",noWrap:!0,sx:{fontSize:12},children:"Engagement rate"})]}),n(s,{alignItems:"flex-start",spacing:2,direction:{xs:"column",sm:"column",md:"column"},sx:{mr:10},children:[e(o,{color:"text.primary",noWrap:!0,variant:"overline",sx:{fontSize:14,fontWeight:700},children:"Categories"}),e(o,{color:"text.secondary",noWrap:!0,sx:{fontSize:12},children:g})]})]}),f=="1"?n(s,{justifyContent:"flex-end",spacing:2,direction:{xs:"column",sm:"column",md:"column"},sx:{mr:10},children:[e(o,{color:"text.primary",noWrap:!0,variant:"overline",sx:{fontSize:14,fontWeight:700},children:[new Date(r).getMonth()+1,new Date(r).getDate(),new Date(r).getFullYear()].join("/")}),e(o,{color:"text.secondary",noWrap:!0,sx:{fontSize:12},children:"Invited Date"})]}):e(p,{})]})})})},me=()=>{const h={isFullScreen:!1,isOpen:!1,message:"",subject:"",toemail:"",to:""},[t,m]=d.useState(h),f=()=>{m(u=>({...u,isOpen:!0}))},r=d.useCallback(()=>{m(h)},[]),g=d.useCallback(()=>{m(u=>({...u,isFullScreen:!0}))},[]),S=d.useCallback(()=>{m(u=>({...u,isFullScreen:!1}))},[]),b=d.useCallback(u=>{},[]),l=d.useCallback(u=>{m(v=>({...v,subject:u}))},[]),C=d.useCallback(u=>{m(v=>({...v,to:u}))},[]);return{...t,handleClose:r,handleMaximize:g,handleMessageChange:b,handleMinimize:S,handleOpen:f,handleSubjectChange:l,handleToChange:C}},k=h=>{const{influencer:t,currentTab:m,invited:f,createdAt:r,...g}=h;P();const[S,b]=d.useState(t.liked==1),l=me(),C=G();console.log(t),d.useEffect(()=>{b(t.liked==1)},[t]);const u=()=>{b(!0);let c={email:JSON.parse(localStorage.getItem("email")),tab:m,inf_id:t.id,liked:"1"};axios.post("/api/handle_like",c).then(x=>{x.data.status})},v=()=>{b(!1);let c={email:JSON.parse(localStorage.getItem("email")),tab:m,inf_id:t.id,liked:"0"};axios.post("/api/handle_like",c).then(x=>{x.data.status===200&&C($({email:JSON.parse(localStorage.getItem("email"))}))})},y=c=>Number(c)<=1?Number(c).toFixed(2)+"%":_(Number(c).toFixed(1)).replace(".0","")+"%",a=[{divider:1e18,suffix:"E"},{divider:1e15,suffix:"P"},{divider:1e12,suffix:"T"},{divider:1e9,suffix:"G"},{divider:1e6,suffix:"M"},{divider:1e3,suffix:"K"}],_=c=>{for(var x=0;x<a.length;x++)if(c>=a[x].divider)return Number(c/a[x].divider).toFixed(1).toString().replace(".0","")+a[x].suffix;return c.toString()};return n(p,{children:[e(M,{...g,style:{marginTop:30,marginBottom:30},children:n(V,{children:[n(s,{alignItems:"center",direction:"row",flexWrap:"wrap",justifyContent:"space-between",sx:{px:2,py:1.5},children:[n(s,{alignItems:"flex-start",spacing:2,direction:{xs:"column",sm:"row"},children:[e(q,{component:z,href:T.dashboard.jobs.companies.details,src:t.profile_pic_url_hd?t.profile_pic_url_hd:`https://ui-avatars.com/api/?name=${t.full_name?t.full_name:""}&background=2970FF&color=fff&rounded=true`,sx:{width:74,height:74},children:oe(t.full_name)}),n("div",{children:[e(H,{color:"#2970FF",component:z,href:T.dashboard.jobs.companies.details,variant:"h6",style:{fontSize:18},children:t.username}),t.verified&&t.verified==1||t.verified&&t.verified==1?e("div",{className:"verified-image"}):"",e(o,{sx:{color:"text.primary"},style:{fontSize:14},children:t.full_name}),e(o,{color:"text.secondary",className:"font-inter location-pointer",variant:"overline",style:{fontSize:12,marginTop:17}}),e(o,{color:"primary",variant:"overline",style:{fontSize:10},children:t.city+", "+t.Country})]}),e("div",{className:"custom-reach",children:n(N,{container:!0,children:[n(N,{item:!0,sx:{color:"#2970FF",fontSize:"11px",fontWeight:300,pl:1,pr:1,pt:.5,pb:.5},children:[e("div",{children:"Reach"}),e("div",{style:{fontSize:"16px",fontWeight:700},children:_(t.follower_count?t.follower_count:t.subscribers)})]}),e(N,{item:!0,style:{display:"flex",alignItems:"center",margin:"0 auto"},children:e("div",{className:"reach-arrow"})})]})})]}),e(s,{alignItems:"center",direction:"row",className:"custom-right",spacing:2,children:S?n(p,{children:[e(w,{onClick:v,className:"right-btn",startIcon:e(j,{sx:{transform:"scale(1.8)",color:"error.main","& path":{fill:c=>c.palette.error.main,fillOpacity:1}},children:e(O,{})})}),e(w,{component:z,href:"/profile/inf/"+t.username,sx:{color:"text.primary"},size:"small",className:"right-btn",startIcon:e(p,{children:e("img",{src:"/assets/icons/Glyph.png"})}),variant:"outlined",children:"View Offer"}),e(w,{onClick:l.handleOpen,size:"small",className:"right-btn",startIcon:e(j,{children:e(W,{})}),variant:"contained",children:"View Messages"})]}):n(p,{children:[e(w,{onClick:u,className:"right-btn",startIcon:e(j,{sx:{transform:"scale(1.8)"},children:e(O,{})})}),e(w,{component:z,href:"/profile/inf/"+t.username,size:"small",className:"right-btn",startIcon:e(p,{children:e("img",{src:"/assets/icons/Glyph.png"})}),variant:"outlined",children:"View Offer"}),e(w,{onClick:l.handleOpen,size:"small",className:"right-btn",startIcon:e(j,{children:e(W,{})}),variant:"contained",children:"View Messages"})]})})]}),e(I,{sx:{mt:2},children:e(he,{engagement:y(t.engagement_rate),followers:_(t.follower_count?t.follower_count:t.subscribers),category:t.category_niche,createdAt:r,invited:f})})]})}),e(ae,{maximize:l.isFullScreen,message:l.message,onClose:l.handleClose,onMessageChange:l.handleMessageChange,onMinimize:l.handleMinimize,onSubjectChange:l.handleSubjectChange,onToChange:l.handleToChange,open:l.isOpen,subject:l.subject,to:t.full_name,avatar:t.profile_pic_url_hd,toemail:t.public_email})]})};k.propTypes={influencer:J.object.isRequired};const ue=()=>{const h=te(),[t,m]=d.useState([]),f=d.useCallback(async()=>{try{const r=await re.getCompanies();h()&&m(r)}catch(r){console.error(r)}},[h]);return d.useEffect(()=>{f()},[]),t},fe=[{label:"Applicants",value:"applicants"},{label:"Job listing",value:"joblisting"},{label:"Offer",value:"offer"},{label:"Invited Influencers",value:"invitedinfluencers"}],pe=h=>{const{jobs:t}=h;ue();const m=K(),[f,r]=d.useState("applicants"),[g,S]=d.useState([]),[b,l]=d.useState([]),[C,u]=d.useState(0),[v,y]=d.useState(0),a=JSON.parse(localStorage.getItem("email")),_=d.useCallback((i,A)=>{r(A)},[]);U();const c=window.location.pathname.split("/")[window.location.pathname.split("/").length-1],x=t==null?void 0:t.filter(i=>i.id==c);return C<1&&axios.post("/api/get_applicants",{jobID:c,email:a}).then(i=>{S(i.data),u(C+1)}).catch(i=>{}),v<1&&axios.post("/api/get_invited",{jobID:c,email:a}).then(i=>{l(i.data),y(v+1)}).catch(i=>{}),n(p,{children:[e(L,{title:"Dashboard: Job Browse"}),e(I,{component:"main",sx:{flexGrow:1,py:8},children:n(R,{maxWidth:m.stretch?!1:"xl",children:[e(o,{variant:"h4",children:"Manage Job"}),n(w,{size:"small",sx:{py:3},component:z,href:"/dashboard/jobs",style:{fontSize:14},children:[e(j,{fontSize:"2",children:e(Y,{})}),"Back"]}),e(ce,{order:window.location.pathname.split("/")[window.location.pathname.split("/").length-1]}),n("div",{className:"right-parent",children:[e(Q,{indicatorColor:"primary",onChange:_,scrollButtons:"auto",textColor:"primary",sx:{py:3},value:f,variant:"scrollable",children:fe.map(i=>e(X,{className:"custom-tab",sx:{fontSize:18},label:i.label,value:i.value},i.value))}),f=="joblisting"&&n(s,{direction:"row",className:"right-edit",children:[n(s,{direction:"row",children:[e(o,{variant:"text.secondary",sx:{fontSize:16,pt:.8},children:"Close the job"}),e(Z,{checked:!0})]}),e(s,{children:e(w,{className:"right-alone-btn",component:z,href:"/dashboard/jobs/edit/"+c,sx:{fontSize:15},variant:"contained",children:"Edit This Job Listing"})})]}),n(I,{children:[f=="applicants"&&e(p,{children:g==null?void 0:g.map(i=>e(k,{influencer:i.inf,currentTab:i.tab,invited:"0"},i.id))}),f=="joblisting"&&e(p,{children:x&&x[0]?e(ie,{job:x[0],active:"all"}):e(p,{})}),f=="offer"&&e(p,{children:g==null?void 0:g.map(i=>e(k,{influencer:i.inf,currentTab:i.tab,invited:"0"},i.id))}),f=="invitedinfluencers"&&e(p,{children:b.length==0?e(p,{children:e(de,{})}):e(p,{children:b==null?void 0:b.map(i=>e(k,{influencer:i.inf,currentTab:i.tab,createdAt:i.updated_at,invited:"1"},i.id))})})]})]}),e(s,{spacing:4,sx:{mt:4},children:n(s,{alignItems:"center",direction:"row",justifyContent:"flex-end",spacing:2,sx:{px:3,py:2},children:[e(F,{disabled:!0,children:e(j,{fontSize:"small",children:e(ne,{})})}),e(F,{children:e(j,{fontSize:"small",children:e(ee,{})})})]})})]})})]})},ge=h=>({jobs:h.jobs.jobs}),De=B(ge)(pe);export{De as default};
