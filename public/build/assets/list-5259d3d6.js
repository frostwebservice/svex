import{r as c,P as h,j as i,l as R,f as p,d as e,m as k,B as P,aY as j,b1 as M,G as $,L as F,R as S,p as y,k as x,aw as A,q as b,aN as G,c as q,F as N,S as U,aL as W,C as H,u as V}from"./app-99b40063.js";import{D as Y}from"./Download01-ca8a2dc3.js";import{P as J}from"./Plus-e7a7c7e5.js";import{U as K}from"./Upload01-898a1b46.js";import{c as Q}from"./index-52796f07.js";import"./customer-list-search-2f88394f.js";import{E as X}from"./Edit02-0e208eb5.js";import{g as Z}from"./get-initials-d1c6cec7.js";import{T as _,b as D,c as l,a as ee}from"./TableRow-3f98919f.js";import{T as te}from"./TableHead-c9a6c4e8.js";import{T as ne}from"./TablePagination-7695cf01.js";import"./apply-pagination-03aa54c3.js";import"./apply-sort-ec30f364.js";import"./data-36d36f99.js";import"./index-47f207a0.js";import"./index-6c09a371.js";import"./LastPage-ea44aac4.js";const ae=(t=[])=>{const[r,o]=c.useState([]);c.useEffect(()=>{o([])},[t]);const s=c.useCallback(()=>{o([...t])},[t]),g=c.useCallback(n=>{o(m=>[...m,n])},[]),u=c.useCallback(()=>{o([])},[]),d=c.useCallback(n=>{o(m=>m.filter(f=>f!==n))},[]);return{handleDeselectAll:u,handleDeselectOne:d,handleSelectAll:s,handleSelectOne:g,selected:r}},B=t=>{const{count:r=0,items:o=[],onDeselectAll:s,onDeselectOne:g,onPageChange:u=()=>{},onRowsPerPageChange:d,onSelectAll:n,onSelectOne:m,page:f=0,rowsPerPage:O=0,selected:C=[]}=t,v=C.length>0&&C.length<o.length,I=o.length>0&&C.length===o.length,T=C.length>0;return i(R,{sx:{position:"relative"},children:[T&&i(p,{direction:"row",spacing:2,sx:{alignItems:"center",backgroundColor:a=>a.palette.mode==="dark"?"neutral.800":"neutral.50",display:T?"flex":"none",position:"absolute",top:0,left:0,width:"100%",px:2,py:.5,zIndex:10},children:[e(k,{checked:I,indeterminate:v,onChange:a=>{a.target.checked?n==null||n():s==null||s()}}),e(P,{color:"inherit",size:"small",children:"Delete"}),e(P,{color:"inherit",size:"small",children:"Edit"})]}),e(j,{children:i(_,{sx:{minWidth:700},children:[e(te,{children:i(D,{children:[e(l,{padding:"checkbox",children:e(k,{checked:I,indeterminate:v,onChange:a=>{a.target.checked?n==null||n():s==null||s()}})}),e(l,{children:"Name"}),e(l,{children:"Location"}),e(l,{children:"Orders"}),e(l,{children:"Spent"}),e(l,{align:"right",children:"Actions"})]})}),e(ee,{children:o.map(a=>{const w=C.includes(a.id),E=`${a.city}, ${a.state}, ${a.country}`,L=M(a.totalSpent).format(`${a.currency}0,0.00`);return i(D,{hover:!0,selected:w,children:[e(l,{padding:"checkbox",children:e(k,{checked:w,onChange:z=>{z.target.checked?m==null||m(a.id):g==null||g(a.id)},value:w})}),e(l,{children:i(p,{alignItems:"center",direction:"row",spacing:1,children:[e($,{src:a.avatar,sx:{height:42,width:42},children:Z(a.name)}),i("div",{children:[e(F,{color:"inherit",component:S,href:y.dashboard.customers.details,variant:"subtitle2",children:a.name}),e(x,{color:"text.secondary",variant:"body2",children:a.email})]})]})}),e(l,{children:E}),e(l,{children:a.totalOrders}),e(l,{children:e(x,{variant:"subtitle2",children:L})}),i(l,{align:"right",children:[e(A,{component:S,href:y.dashboard.customers.edit,children:e(b,{children:e(X,{})})}),e(A,{component:S,href:y.dashboard.customers.details,children:e(b,{children:e(G,{})})})]})]},a.id)})})]})}),e(ne,{component:"div",count:r,onPageChange:u,onRowsPerPageChange:d,page:f,rowsPerPage:O,rowsPerPageOptions:[5,10,25]})]})};B.propTypes={count:h.number,items:h.array,onDeselectAll:h.func,onDeselectOne:h.func,onPageChange:h.func,onRowsPerPageChange:h.func,onSelectAll:h.func,onSelectOne:h.func,page:h.number,rowsPerPage:h.number,selected:h.array};const re=()=>{const[t,r]=c.useState({filters:{query:void 0,hasAcceptedMarketing:void 0,isProspect:void 0,isReturning:void 0},page:0,rowsPerPage:5,sortBy:"updatedAt",sortDir:"desc"}),o=c.useCallback(d=>{r(n=>({...n,filters:d}))},[]),s=c.useCallback(d=>{r(n=>({...n,sortBy:d.sortBy,sortDir:d.sortDir}))},[]),g=c.useCallback((d,n)=>{r(m=>({...m,page:n}))},[]),u=c.useCallback(d=>{r(n=>({...n,rowsPerPage:parseInt(d.target.value,10)})),r(n=>({...n,page:0}))},[]);return{handleFiltersChange:o,handleSortChange:s,handlePageChange:g,handleRowsPerPageChange:u,state:t}},se=t=>{const r=V(),[o,s]=c.useState({customers:[],customersCount:0}),g=c.useCallback(async()=>{try{const u=await Q.getCustomers(t);r()&&s({customers:u.data,customersCount:u.count})}catch(u){console.error(u)}},[t,r]);return c.useEffect(()=>{g()},[t]),{...o}},oe=(t=[])=>c.useMemo(()=>t.map(r=>r.id),[t]),xe=()=>{const t=re(),r=se(t.state),o=oe(r.customers),s=ae(o);return q(),i(N,{children:[e(U,{title:"Dashboard: Customer List"}),e(R,{component:"main",sx:{flexGrow:1,py:8},children:e(W,{maxWidth:"xl",children:i(p,{spacing:4,children:[i(p,{direction:"row",justifyContent:"space-between",spacing:4,children:[i(p,{spacing:1,children:[e(x,{variant:"h4",children:"Customers"}),i(p,{alignItems:"center",direction:"row",spacing:1,children:[e(P,{color:"inherit",size:"small",startIcon:e(b,{children:e(K,{})}),children:"Import"}),e(P,{color:"inherit",size:"small",startIcon:e(b,{children:e(Y,{})}),children:"Export"})]})]}),e(p,{alignItems:"center",direction:"row",spacing:3,children:e(P,{startIcon:e(b,{children:e(J,{})}),variant:"contained",children:"Add7"})})]}),e(H,{children:e(B,{count:r.customersCount,items:r.customers,onDeselectAll:s.handleDeselectAll,onDeselectOne:s.handleDeselectOne,onPageChange:t.handlePageChange,onRowsPerPageChange:t.handleRowsPerPageChange,onSelectAll:s.handleSelectAll,onSelectOne:s.handleSelectOne,page:t.state.page,rowsPerPage:t.state.rowsPerPage,selected:s.selected})})]})})})]})};export{xe as default};
