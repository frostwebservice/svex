import{w as L,x as M,r as n,j as l,bM as Z,f as v,d as e,k as C,aw as ee,q as z,c2 as te,bO as ae,l as y,F as N,C as ne,B as f,ch as A,aS as se,c9 as W,o as oe,cN as ie,c as le,S as re,aL as ce,br as ue,G as de,n as pe,c4 as B,bk as me,bl as he,D as fe,u as G}from"./app-4f3bf436.js";import{H as J}from"./Heart-8f13a792.js";import{s as F}from"./social-post-card-13b4ca44.js";import{I as ge}from"./inf-overview-334c95fd.js";/* empty css                */import{I as be}from"./inf-composer-78004965.js";import{J as ke}from"./job-list-card-134e8125.js";import"./mail-f1a5ead4.js";import{G as x}from"./Grid-75244e3f.js";import"./index-bce493db.js";import"./Clock-e75014e2.js";import"./Share07-57539485.js";import"./index-2355833e.js";import"./index-19504ddf.js";import"./index-d4f920b7.js";import"./FaceSmile-88eecc28.js";import"./Link01-b8ef3931.js";import"./Attachment01-ba49dac8.js";import"./Plus-1e7dc0da.js";import"./Image01-240790b4.js";import"./use-mocked-user-2f7e8148.js";import"./get-initials-d1c6cec7.js";import"./CardHeader-92a56fa2.js";import"./CardMedia-af015ba8.js";import"./overview-tips-787ba11f.js";import"./severity-pill-de65e67d.js";import"./chart-b0c60746.js";import"./CardActions-b41734f5.js";import"./index-ca618f29.js";import"./index-2e5eca51.js";import"./index-ec26c258.js";import"./overview-pending-issues-f52250b2.js";import"./quill-editor-165bdae4.js";import"./isEqual-bca331d4.js";import"./index-a0050f4b.js";import"./file-dropzone-a482cc39.js";import"./tslib.es6-af7906ce.js";import"./Upload01-6c848d0f.js";import"./bytes-to-size-706bbf81.js";const ve=s=>{const{onClose:r,currentTab:c="",infID:t=0,groupID:p=0,open:h=!1,...g}=s;M();const I=JSON.parse(localStorage.getItem("email")),[b,w]=n.useState([]);console.log(b),n.useEffect(()=>{axios.post("/api/getoutreachs",{email:I}).then(m=>{w(m.data)}).catch(m=>{})},[]);const T=m=>{axios.post("/api/add_group",{group_id:m,inf_id:t,tab:c}).then(k=>{A.success("Successfuly added to outreach group."),r()}).catch(k=>{})};return l(Z,{fullWidth:!0,maxWidth:"lg",open:h,onClose:r,children:[l(v,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:3,sx:{px:3,py:2},children:[e(C,{variant:"h6",children:"Select a group"}),e(ee,{color:"inherit",onClick:r,children:e(z,{children:e(te,{})})})]}),e(ae,{children:e(y,{sx:{mt:2},children:b==null?void 0:b.map((m,k)=>k==0?e(N,{}):e(ne,{sx:{mb:3},children:l(v,{children:[l(v,{alignItems:"flex-start",direction:"row",flexWrap:"wrap",justifyContent:"space-between",sx:{px:2,py:1.5},children:[l(C,{variant:"subtitle1",sx:{fontSize:16},children:["Group Name: ",m[0].group_name]}),e(v,{alignItems:"center",direction:"row",spacing:2,children:e(f,{onClick:()=>T(m[0].group_id),variant:"contained",size:"small",style:{fontSize:14},children:"Add to this outreach group"})})]}),l(C,{variant:"inherit",sx:{fontSize:14,px:2},children:["Brief Description: ",m[0].brief_group]})]})}))})})]})},Ce=s=>({userinfo:s.profile.userinfo}),we=L(Ce)(ve),Se=()=>{const s={isFullScreen:!1,isOpen:!1,message:"",subject:"",to:"",toDisplay:"",loading:!1,data:new FormData},r=M(),[c,t]=n.useState(s),p=n.useCallback(()=>{t(o=>({...o,isOpen:!0}))},[]),h=n.useCallback(o=>{t(d=>({...d,toDisplay:o}))},[]),g=n.useCallback(()=>{t(s)},[]),I=n.useCallback(()=>{t(o=>({...o,isFullScreen:!0}))},[]),b=n.useCallback(()=>{t(o=>({...o,isFullScreen:!1}))},[]),w=n.useCallback(o=>{t(d=>({...d,data:o}))},[]),T=n.useCallback(o=>{t(d=>({...d,message:o}))},[]),m=n.useCallback(o=>{t(d=>({...d,subject:o}))},[]),k=n.useCallback(o=>{console.log(o),t(d=>({...d,to:o}))},[]);return{...c,handleClose:g,handleMaximize:I,handleMessageChange:T,handleMinimize:b,handleSubmit:()=>{t(o=>({...o,loading:!0})),c.data.append("to",c.to),c.data.append("subject",c.subject),c.data.append("message",c.message),c.data.append("email",JSON.parse(localStorage.getItem("email"))),axios.post("/api/send_mail",c.data,{}).then(o=>{t(d=>({...d,loading:!1,subject:"",to:"",message:"",isOpen:!1,data:new FormData})),A.success("Message Sent Successfuly."),r(thunks.getEmails({label:useSearchParams().get("label")||"inbox",email:JSON.parse(localStorage.getItem("email"))}))}).catch(o=>{})},handleOpen:p,handleAttach:w,handleSubjectChange:m,handleToChange:k,handleDisplayChange:h}},xe=[{label:"Overview",value:"infoverview"}],O=[{divider:1e18,suffix:"E"},{divider:1e15,suffix:"P"},{divider:1e12,suffix:"T"},{divider:1e9,suffix:"G"},{divider:1e6,suffix:"M"},{divider:1e3,suffix:"K"}],_=s=>{for(var r=0;r<O.length;r++)if(s>=O[r].divider)return Number(s/O[r].divider).toFixed(1).toString().replace(".0","")+O[r].suffix;return s.toString()},_e=()=>{const s=G(),[r,c]=n.useState(null),t=n.useCallback(async()=>{try{const p=await F.getProfile();s()&&c(p)}catch(p){console.error(p)}},[s]);return n.useEffect(()=>{t()},[]),r},ye=()=>{const s=G(),[r,c]=n.useState([]),t=n.useCallback(async()=>{try{const p=await F.getPosts();s()&&c(p)}catch(p){console.error(p)}},[s]);return n.useEffect(()=>{t()},[]),r},Ne=(s="")=>{const[r,c]=n.useState([]),t=G(),p=n.useCallback(async()=>{const h=await F.getConnections();t()&&c(h)},[t]);return n.useEffect(()=>{p()},[s]),r.filter(h=>{var g;return(g=h.name)==null?void 0:g.toLowerCase().includes(s)})},Ie=s=>{const r=se(),c=JSON.parse(localStorage.getItem("email")),{socialinfo:t,userinfo:p}=s,h=_e(),[g,I]=n.useState("infoverview"),[b,w]=n.useState("not_connected"),T=ye(),[m,k]=n.useState("");Ne(m);const P=W(),o=W(),d=M();oe();const[S,R]=n.useState(t.basic);let a=t[S];const i=Se(),[$,j]=n.useState(!!(a&&a.liked=="1")),Q=u=>{R(u)};n.useEffect(()=>{d(ie({email:c,infname:window.location.pathname.split("/")[3],socialtype:"total"}))},[d]),n.useEffect(()=>{j(!!(a&&a.liked=="1"))},[a]);const q=()=>{P.handleOpen()},E=()=>{o.handleOpen()},H=()=>{j(!0);let u={email:JSON.parse(localStorage.getItem("email")),tab:S,inf_id:a&&a.id?a.id:"",liked:"1"};axios.post("/api/handle_like",u).then(D=>{D.data.status})},U=()=>{j(!1);let u={email:JSON.parse(localStorage.getItem("email")),tab:S,inf_id:a&&a.id?a.id:"",liked:"0"};axios.post("/api/handle_like",u).then(D=>{D.data.status})};le(),n.useCallback(()=>{w("pending")},[]),n.useCallback(()=>{w("not_connected")},[]);const K=n.useCallback((u,D)=>{I(D)},[]);if(n.useCallback(u=>{k(u.target.value)},[]),!h)return null;const V=()=>{let u=(t&&t.instagram?t.instagram.follower_count:0)+(t&&t.pinterest?t.pinterest.follower_count:0)+(t&&t.tiktok?t.tiktok.follower_count:0)+(t&&t.twitter?t.twitter.follower_count:0)+(t&&t.youtube?t.youtube.follower_count:0);return _(u)},X=()=>{let u="";return u+="Instagram followers: "+(t&&t.instagram?_(t.instagram.follower_count):0)+`
Tiktok followers: `+(t&&t.tiktok?_(t.tiktok.follower_count):0)+`
Youtube followers: `+(t&&t.youtube?_(t.youtube.follower_count):0)+`
Twitter followers: `+(t&&t.twitter?_(t.twitter.follower_count):0)+`
Pinterest followers: `+(t&&t.pinterest?_(t.pinterest.follower_count):0)+`
`,u},Y=()=>S=="tiktok"&&a&&a.external_url=="-"?"":a&&a.external_url?a.external_url:"";return l(N,{children:[e(re,{title:"Dashboard: Social Profile"}),e(ke,{onClose:P.handleClose,open:P.open,currentTab:S,infID:a&&a.id}),e(we,{onClose:o.handleClose,open:o.open,currentTab:S,infID:a&&a.id}),e(y,{component:"main",sx:{flexGrow:1,py:8},children:l(ce,{maxWidth:r.stretch?!1:"xl",children:[l("div",{children:[e(y,{style:{backgroundImage:`url(${h.cover})`},sx:{backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",borderRadius:1,height:421,position:"relative","&:hover":{"& button":{visibility:"visible"}}}}),l(v,{alignItems:"center",direction:"row",className:"custom-parent",spacing:2,sx:{mt:4},children:[l(v,{alignItems:"center",direction:"row",className:"custom-avatar",spacing:2,children:[e(y,{component:ue,sx:{alignItems:"center",display:"flex",borderWidth:2,borderStyle:"solid",borderColor:"divider",height:140,width:140,borderRadius:"50%"},children:e(de,{src:a&&a.profile_pic_url_hd?a.profile_pic_url_hd:`https://ui-avatars.com/api/?name=${a&&a.full_name?a.full_name:""}&background=2970FF&color=fff&rounded=true`,sx:{height:130,width:130}})}),l("div",{className:"brand-info",children:[l(x,{container:!0,children:[l(x,{item:!0,sm:7,xs:12,children:[e(C,{color:"primary",variant:"h6",style:{fontSize:22,wordWrap:"break-word"},children:a?a.username:""}),e(C,{color:"text.secondary",className:"font-inter",variant:"subtitle2",style:{fontSize:12,fontWeight:600,marginTop:4},children:a?a.full_name:""})]}),e(x,{item:!0,sm:5,xs:12,children:e(pe,{title:e("div",{style:{whiteSpace:"pre-line"},children:X()}),children:e("div",{className:"custom-reach",children:l(x,{container:!0,children:[l(x,{item:!0,sx:{color:"#2970FF",fontSize:"11px",fontWeight:300,pl:1,pr:1,pt:.5,pb:.5},children:[e("div",{children:"Reach"}),e("div",{style:{fontSize:"16px",fontWeight:700},children:V()})]}),e(x,{item:!0,style:{display:"flex",alignItems:"center",margin:"0 auto"},children:e("div",{className:"reach-arrow"})})]})})})})]}),e(C,{color:"text.secondary",className:"font-inter location-pointer",variant:"overline",style:{fontSize:12,marginTop:17}}),e(C,{color:"primary",variant:"overline",className:"font-inter",style:{fontSize:13},children:a?a.city+", "+a.Country:""})]})]}),e(y,{sx:{flexGrow:1}}),e(v,{alignItems:"center",direction:"row",spacing:2,className:"inf-button-bar",sx:{display:{md:"block"}},children:$?l(N,{children:[e(f,{onClick:U,className:"fav-btn=alone",startIcon:e(z,{sx:{transform:"scale(1.8)",color:"error.main","& path":{fill:u=>u.palette.error.main,fillOpacity:1}},children:e(J,{})})}),e(f,{className:"fav-btn-alone",startIcon:e("img",{src:"/assets/stats/users.png"}),onClick:E}),e(f,{onClick:q,size:"small",className:"fav-btn small-button",startIcon:e(N,{children:e("img",{src:"/assets/icons/invite.svg"})}),variant:"outlined",children:"Invite To Project"}),e(f,{onClick:()=>{i.handleToChange(a&&a.public_email?a.public_email:""),i.handleDisplayChange(a&&a.full_name?a.full_name:""),i.handleOpen()},size:"small",className:"social-btn small-button",startIcon:e(z,{children:e(B,{})}),variant:"contained",children:"Send Message"})]}):l(N,{children:[e(f,{onClick:H,className:"fav-btn-alone",startIcon:e(z,{sx:{transform:"scale(1.8)"},children:e(J,{})})}),e(f,{className:"fav-btn-alone",onClick:E,startIcon:e("img",{src:"/assets/stats/users.png"})}),e(f,{onClick:q,size:"small",className:"fav-btn small-button",startIcon:e(N,{children:e("img",{src:"/assets/icons/invite.svg"})}),variant:"outlined",children:"Invite To Project"}),e(f,{onClick:()=>{i.handleToChange(a&&a.public_email?a.public_email:""),i.handleOpen()},size:"small",className:"social-btn small-button",startIcon:e(z,{children:e(B,{})}),variant:"contained",children:"Send Message"})]})})]})]}),e("div",{className:"quick-link-bar",children:l("div",{className:"right-quick",children:[e("div",{className:"quick-font",children:"Quick links"}),l("div",{className:"quick-links",children:[e("a",{className:" homepage-icon",href:Y(),target:"_blank"}),e("a",{className:"instagram-icon quick-link",href:"https://www.instagram.com",target:"_blank"}),e("a",{className:"tiktok-icon quick-link",href:"https://www.tiktok.com",target:"_blank"}),e("a",{className:"youtube-icon quick-link",href:"https://www.youtube.com",target:"_blank"}),e("a",{className:"twitter-icon quick-link",href:"https://www.twitter.com",target:"_blank"}),e("a",{className:"pinterest-icon quick-link",href:"https://www.pinterest",target:"_blank"})]})]})}),e(me,{indicatorColor:"primary",onChange:K,scrollButtons:"auto",sx:{mt:5},textColor:"primary",value:g,variant:"scrollable",className:"tab-panel",children:xe.map(u=>e(he,{className:"social-font",label:u.label,value:u.value},u.value))}),e(fe,{}),e(y,{children:g==="infoverview"&&e(ge,{posts:T,profile:h,total:"total",changeStat:Q})})]})}),e(be,{maximize:i.isFullScreen,message:i.message,onClose:i.handleClose,onMessageChange:i.handleMessageChange,onMinimize:i.handleMinimize,onSubjectChange:i.handleSubjectChange,onSubmit:i.handleSubmit,onAttach:i.handleAttach,onToChange:i.handleToChange,onDisplayChange:i.handleDisplayChange,open:i.isOpen,subject:i.subject,loading:i.loading,to:i.to,toDisplay:i.toDisplay,avatar:a&&a.profile_pic_url_hd?a.profile_pic_url_hd:""})]})},Te=s=>({socialinfo:s.profile.socialinfo,userinfo:s.profile.userinfo}),ht=L(Te)(Ie);export{ht as default};
