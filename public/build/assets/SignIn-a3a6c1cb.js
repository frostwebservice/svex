import{c as N,a as h}from"./index.esm-aa8c4ef8.js";import{u as k,r as n,b as B,o as I,j as s,F as P,d as a,S as R,l as p,L as d,R as T,q,A as F,k as g,C as j,p as c,e as A,f as E,B as z,s as D}from"./app-3a5b2ef7.js";import{u as M}from"./formik.esm-b85f501c.js";import{u as V}from"./use-search-params-4a913bac.js";import{R as f}from"./TextfieldStyle-5b212929.js";/* empty css             */import{C as W}from"./CardHeader-6a69ce29.js";const X=()=>{const x=N({email:h().email("Must be a valid email").max(255).required("Email is required"),password:h().max(255).required("Password is required")}),m=k(),b=V().get("returnTo"),[w,r]=n.useState(!1),[v,t]=n.useState("Log In"),{signIn:C}=B(),[S,y]=n.useState({email:"",password:""}),l=I(),e=M({initialValues:S,validationSchema:x,onSubmit:o=>{r(!0),t(""),axios.post("/api/user-signin",o).then(i=>{if(i.data.status===200){y({email:"",password:""}),t("Log In"),r(!1);async function L(){try{await C(o.email,o.password,i.data.data),m()&&l(b||c.dashboard.index)}catch(u){console.error(u),m()&&(helpers.setStatus({success:!1}),helpers.setErrors({submit:u.message}),helpers.setSubmitting(!1))}}L(),t("Log in"),r(!1)}i.data.status==="failed"&&(t("Log In"),r(!1),alert(i.data.message))})}});return s(P,{children:[a(R,{title:"Login"}),s("div",{className:"signup-page",children:[a(p,{sx:{mb:2},children:s(d,{color:"text.primary",component:T,href:"/Dashboard",sx:{alignItems:"center",display:"inline-flex"},underline:"hover",children:[a(q,{sx:{mr:1},children:a(F,{})}),a(g,{variant:"body1",sx:{color:"rgba(0, 0, 0, 0.87)"},children:"Dashboard"})]})}),s(j,{sx:{borderRadius:2.5},elevation:16,className:"mainCard card  px-4 pt-4 pb-3",children:[a(W,{subheader:s(g,{className:"title-inter",color:"text.secondary",children:["Don't have an account? Â ",a(d,{underline:"hover",className:"title-inter pointer",onClick:()=>l(c.auth.auth.signup),children:"Register"})]}),sx:{pb:0},className:"title  smalltitle signup-form-title",title:"Log in"}),a(A,{className:"signup-form",children:s("form",{noValidate:!0,onSubmit:e.handleSubmit,children:[s(E,{spacing:3,children:[a(f,{className:"title-inter mt-3",variant:"filled",error:!!(e.touched.email&&e.errors.email),fullWidth:!0,helperText:e.touched.email&&e.errors.email,label:"Email Address",name:"email",onBlur:e.handleBlur,onChange:e.handleChange,type:"email",value:e.values.email}),a(f,{className:"title-inter mt-3",variant:"filled",error:!!(e.touched.password&&e.errors.password),fullWidth:!0,helperText:e.touched.password&&e.errors.password,label:"Password",name:"password",autoComplete:"new password",onBlur:e.handleBlur,onChange:e.handleChange,type:"password",value:e.values.password})]}),s(z,{fullWidth:!0,size:"large",sx:{mt:5},type:"submit",color:"primary",variant:"contained",className:"title-inter smallsize mainButton background-blue",children:[s("span",{className:"ml-2",children:[" ",v," "]}),w?a(D,{color:"inherit",size:"2rem"}):a("span",{})]}),a(p,{sx:{display:"flex",justifyContent:"center",mt:3},children:a(d,{underline:"hover",className:"pointer",variant:"subtitle2",onClick:()=>l(c.auth.auth.forgotPassword),children:"Forgot password?"})})]})})]})]})]})};export{X as default};
