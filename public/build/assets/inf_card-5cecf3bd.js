import{d as e,C as w,f as d,D as F,j as l,k as c,P as M,o as T,r as o,x as z,F as g,e as j,G as O,R as b,L as W,aM as _,B as u,q as S,c4 as I,l as L,cf as P,cg as B}from"./app-99b40063.js";import{g as D}from"./get-initials-d1c6cec7.js";import{H as N}from"./Heart-df4685f8.js";import{M as E}from"./mail-41cf5abd.js";const J=m=>{const{followers:a,engagement:r,category:s,...p}=m;return e(w,{variant:"outlined",...p,children:e(d,{divider:e(F,{}),children:l(d,{alignItems:"center",direction:"row",flexWrap:"wrap",sx:{px:2,py:1.5},children:[l(d,{alignItems:"flex-start",spacing:2,direction:{xs:"column",sm:"column",md:"column"},sx:{mr:10},children:[e(c,{color:"text.primary",noWrap:!0,sx:{fontSize:14,fontWeight:700},children:a}),e(c,{color:"text.secondary",noWrap:!0,sx:{fontSize:12},style:{marginTop:0},children:"Followers"})]}),l(d,{alignItems:"flex-start",spacing:2,direction:{xs:"column",sm:"column",md:"column"},sx:{mr:10},children:[e(c,{color:"text.primary",noWrap:!0,sx:{fontSize:14,fontWeight:700},children:r}),e(c,{color:"text.secondary",style:{marginTop:0},noWrap:!0,sx:{fontSize:12},children:"Engagement rate"})]}),l(d,{alignItems:"flex-start",spacing:2,direction:{xs:"column",sm:"column",md:"column"},sx:{mr:10},children:[e(c,{color:"text.primary",noWrap:!0,sx:{fontSize:14,fontWeight:700},children:"Categories"}),e(c,{color:"text.secondary",style:{marginTop:0},noWrap:!0,sx:{fontSize:12},children:s})]})]})})})},A=()=>{const m={isFullScreen:!1,isOpen:!1,message:"",subject:"",to:"",loading:!1,data:new FormData},a=z(),[r,s]=o.useState(m),p=o.useCallback(()=>{s(t=>({...t,isOpen:!0}))},[]),f=o.useCallback(()=>{s(m)},[]),n=o.useCallback(()=>{s(t=>({...t,isFullScreen:!0}))},[]),v=o.useCallback(()=>{s(t=>({...t,isFullScreen:!1}))},[]),C=o.useCallback(t=>{s(i=>({...i,data:t}))},[]),y=o.useCallback(t=>{s(i=>({...i,message:t}))},[]),k=o.useCallback(t=>{s(i=>({...i,subject:t}))},[]),h=o.useCallback(t=>{s(i=>({...i,to:t}))},[]);return{...r,handleClose:f,handleMaximize:n,handleMessageChange:y,handleMinimize:v,handleSubmit:()=>{s(t=>({...t,loading:!0})),r.data.append("to",r.to),r.data.append("subject",r.subject),r.data.append("message",r.message),r.data.append("email",JSON.parse(localStorage.getItem("email"))),axios.post("/api/send_mail",r.data,{}).then(t=>{s(i=>({...i,loading:!1,subject:"",to:"",message:"",isOpen:!1,data:new FormData})),B.success("Message Sent Successfuly."),a(thunks.getEmails({label:useSearchParams().get("label")||"inbox",email:JSON.parse(localStorage.getItem("email"))}))}).catch(t=>{})},handleOpen:p,handleAttach:C,handleSubjectChange:k,handleToChange:h}},R=m=>{const{influencer:a,currentTab:r,...s}=m;T();const[p,f]=o.useState(a.liked==1),n=A(),v=z();o.useEffect(()=>{f(a.liked==1)},[a]);const C=()=>{f(!0);let t={email:JSON.parse(localStorage.getItem("email")),tab:r,inf_id:a.id,liked:"1"};axios.post("/api/handle_like",t).then(i=>{i.data.status})},y=()=>{f(!1);let t={email:JSON.parse(localStorage.getItem("email")),tab:r,inf_id:a.id,liked:"0"};axios.post("/api/handle_like",t).then(i=>{i.data.status===200&&v(P({email:JSON.parse(localStorage.getItem("email"))}))})},k=t=>Number(t)<=1?Number(t).toFixed(2)+"%":x(Number(t).toFixed(1)).replace(".0","")+"%",h=[{divider:1e18,suffix:"E"},{divider:1e15,suffix:"P"},{divider:1e12,suffix:"T"},{divider:1e9,suffix:"G"},{divider:1e6,suffix:"M"},{divider:1e3,suffix:"K"}],x=t=>{for(var i=0;i<h.length;i++)if(t>=h[i].divider)return Number(t/h[i].divider).toFixed(1).toString().replace(".0","")+h[i].suffix;return t.toString()};return l(g,{children:[e(w,{...s,style:{marginTop:30,marginBottom:30},children:l(j,{children:[l(d,{alignItems:"center",direction:"row",flexWrap:"wrap",justifyContent:"space-between",sx:{px:2,py:1.5},children:[l(d,{alignItems:"flex-start",spacing:2,direction:{xs:"column",sm:"row"},children:[e(O,{component:b,href:"/profile/inf/"+a.username,target:"_blank",src:a.profile_pic_url_hd?a.profile_pic_url_hd:`https://ui-avatars.com/api/?name=${a.full_name?a.full_name:""}&background=2970FF&color=fff&rounded=true`,sx:{width:74,height:74},children:D(a.full_name)}),l("div",{children:[e(W,{color:"#2970FF",component:b,href:"/profile/inf/"+a.username,target:"_blank",variant:"h6",style:{fontSize:18},children:a.username}),a.verified&&a.verified==1||a.verified&&a.verified==1?e("div",{className:"verified-image"}):"",e(c,{sx:{color:"text.primary"},style:{fontSize:14},children:a.full_name}),e(c,{color:"text.secondary",className:"font-inter location-pointer",variant:"overline",style:{fontSize:12,marginTop:17}}),e(c,{color:"primary",variant:"overline",style:{fontSize:10},children:a.city+", "+a.Country})]}),e("div",{className:"custom-reach",children:l(_,{container:!0,children:[l(_,{item:!0,sx:{color:"#2970FF",fontSize:"11px",fontWeight:300,pl:1,pr:1,pt:.5,pb:.5},children:[e("div",{children:"Reach"}),e("div",{style:{fontSize:"16px",fontWeight:700},children:x(a.follower_count?a.follower_count:a.subscribers)})]}),e(_,{item:!0,style:{display:"flex",alignItems:"center",margin:"0 auto"},children:e("div",{className:"reach-arrow"})})]})})]}),e(d,{alignItems:"center",direction:"row",className:"right-panel",spacing:2,children:p?l(g,{children:[e(u,{onClick:y,className:"right-btn",startIcon:e(S,{sx:{transform:"scale(1.8)",color:"error.main","& path":{fill:t=>t.palette.error.main,fillOpacity:1}},children:e(N,{})})}),e(u,{component:b,href:"/profile/inf/"+a.username,sx:{color:"text.primary"},size:"small",target:"_blank",className:"right-btn",startIcon:e(g,{children:e("img",{src:"/assets/icons/icon-profile.svg"})}),variant:"outlined",children:"View Profile"}),e(u,{onClick:()=>{n.handleToChange(a.public_email),n.handleOpen()},size:"small",className:"right-btn",startIcon:e(S,{children:e(I,{})}),variant:"contained",children:"Send Message"})]}):l(g,{children:[e(u,{onClick:C,className:"right-btn",startIcon:e(S,{sx:{transform:"scale(1.8)"},children:e(N,{})})}),e(u,{component:b,href:"/profile/inf/"+a.username,size:"small",target:"_blank",className:"right-btn",startIcon:e(g,{children:e("img",{src:"/assets/icons/icon-profile.svg"})}),variant:"outlined",children:"View Profile"}),e(u,{onClick:()=>{n.handleToChange(a.public_email),n.handleOpen()},size:"small",className:"right-btn",startIcon:e(S,{children:e(I,{})}),variant:"contained",children:"Send Message"})]})})]}),e(L,{sx:{mt:2},children:e(J,{engagement:k(a.engagement_rate),followers:x(a.follower_count?a.follower_count:a.subscribers),category:a.category_niche})})]})}),e(E,{maximize:n.isFullScreen,message:n.message,onClose:n.handleClose,onMessageChange:n.handleMessageChange,onMinimize:n.handleMinimize,onSubjectChange:n.handleSubjectChange,onSubmit:n.handleSubmit,onAttach:n.handleAttach,onToChange:n.handleToChange,open:n.isOpen,subject:n.subject,loading:n.loading,to:n.to,avatar:a.profile_pic_url_hd})]})};R.propTypes={influencer:M.object.isRequired};export{R as I};
